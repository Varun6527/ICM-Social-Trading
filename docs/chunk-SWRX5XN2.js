import{a as B}from"./chunk-ELFW3MCS.js";import{a as j,b as V,e as N,f as J,g as Q}from"./chunk-BBDCSVIU.js";import{a as w}from"./chunk-D2HZNMZZ.js";import{Oa as O}from"./chunk-GPXXUB3O.js";import{$b as L,Ab as T,Da as x,Ha as S,Hb as P,Hc as M,Kc as F,Lc as A,Ma as c,Qa as o,R as _,Ra as r,Sa as E,Ya as u,Zb as k,_a as h,eb as y,fb as R,gb as b,lb as n,mb as s,nb as g,oa as a,ob as v,pa as D,ub as C,yb as d,zb as p}from"./chunk-VFCAWHKN.js";function z(t,m){t&1&&(n(0),d(1,"translate"),d(2,"translate")),t&2&&v(" ",p(1,2,"PROVIDERS_PROFILE.Delete")," ",p(2,4,"PROVIDERS_PROFILE.Additional Agent")," ")}function W(t,m){t&1&&(n(0),d(1,"translate"),d(2,"translate")),t&2&&v(" ",p(1,2,"PROVIDERS_PROFILE.Delete")," ",p(2,4,"PROVIDERS_PROFILE.Join Link")," ")}function q(t,m){t&1&&(n(0),d(1,"translate")),t&2&&g(" ",p(1,1,"PROVIDERS_PROFILE.Delete")," ")}function G(t,m){t&1&&(n(0),d(1,"translate")),t&2&&g(" ",p(1,1,"PROVIDERS_PROFILE.Delete the additional agent")," ")}function K(t,m){t&1&&(n(0),d(1,"translate")),t&2&&g(" ",p(1,1,"PROVIDERS_PROFILE.Delete the offer's join link")," ")}function U(t,m){t&1&&(n(0),d(1,"translate")),t&2&&g(" ",p(1,1,"PROVIDERS_PROFILE.Delete the risk rule")," ")}function H(t,m){if(t&1&&(o(0,"div",7)(1,"div"),n(2),d(3,"translate"),r(),o(4,"div"),n(5),r()(),o(6,"div",7)(7,"div"),n(8),d(9,"translate"),r(),o(10,"div"),n(11),r()()),t&2){let e=h();a(2),s(p(3,4,"COMMON.Agent")),a(3),s(e.modelData.externalAccount),a(3),s(p(9,6,"PROVIDERS_PROFILE.Share")),a(3),s(e.modelData.share)}}function X(t,m){if(t&1&&(o(0,"div",7)(1,"div"),n(2),d(3,"translate"),r(),o(4,"div"),n(5),r()(),o(6,"div",7)(7,"div"),n(8),d(9,"translate"),r(),o(10,"div"),n(11),d(12,"date"),r()()),t&2){let e=h();a(2),s(p(3,4,"COMMON.Key")),a(3),s(e.modelData.key),a(3),s(p(9,6,"OFFERS.Expiration")),a(3),s(T(12,8,e.modelData.expiration,"M/d/yy"))}}function Y(t,m){if(t&1&&(o(0,"div",7)(1,"div"),n(2),d(3,"translate"),r(),o(4,"div"),n(5),r()(),o(6,"div",7)(7,"div"),n(8),d(9,"translate"),r(),o(10,"div"),n(11),r()(),o(12,"div",7)(13,"div"),n(14),d(15,"translate"),r(),o(16,"div"),n(17),r()(),o(18,"div",7)(19,"div"),n(20),d(21,"translate"),r(),o(22,"div"),n(23),r()()),t&2){let e=h();a(2),s(p(3,8,"PROVIDERS_PROFILE.Parameter")),a(3),s(e.modelData.parameter),a(3),s(p(9,10,"PROVIDERS_PROFILE.Threshold")),a(3),s(e.modelData.threshold),a(3),s(p(15,12,"PROVIDERS_PROFILE.Trading Action")),a(3),s(e.modelData.tradingAction),a(3),s(p(21,14,"PROVIDERS_PROFILE.Subscription Action")),a(3),s(e.modelData.subscriptionAction)}}var se=(()=>{class t{data;dialogRef;_webService;cdr;showLoader=!1;offerData={};riskData;modelType="";modelData={};subscriptionData;errorComponent;IConstant=new M;constructor(e,i,l,f){this.data=e,this.dialogRef=i,this._webService=l,this.cdr=f,this.modelType=this.data.modelType,this.modelData=this.data.modelData,this.offerData=this.data.offerData,this.subscriptionData=this.data.subscriptionData,this.riskData=this.data.riskData}deleteOfferData(){this.showLoader=!0;let e=this.getParamOfDeleteOfferData(),i,l="",f="";this.modelType=="agent"||this.modelType=="joinLink"?(i=this._webService.updateOfferData(e),l="Offer has been updated",f="refresh_offer_data"):this.modelType=="risk"&&(i=this._webService.createOrUpdateRiskData(e),l="Subscription has been updated",f="refresh_risk_data"),i?.subscribe({next:I=>{this.showSuccessPopupMsg(l),this.dialogRef.close({action:f}),this.showLoader=!1},error:I=>{this.showLoader=!1,this.showErrorWarnMessage(this.IConstant.errorMessageObj[I?.error?.errorCode]),this.cdr.detectChanges()}})}getParamOfDeleteOfferData(){let e={};return this.modelType=="agent"?(e.additionalAgents=JSON.parse(JSON.stringify(this.offerData.additionalAgents)),e.additionalAgents.chain=e.additionalAgents.chain.filter(i=>i.externalAccount!=this.modelData.externalAccount),e.offerId=this.offerData.id):this.modelType=="joinLink"?(e.registration=JSON.parse(JSON.stringify(this.offerData.registration)),e.registration.links=e.registration.links.filter(i=>i.key!=this.modelData.key),e.offerId=this.offerData.id):this.modelType=="risk"&&(e.rules=JSON.parse(JSON.stringify(this.riskData)),e.rules=e.rules.filter(i=>i.parameter!==this.modelData.parameter),e.subscriptionId=this.subscriptionData.id),e}showErrorWarnMessage(e){let i=this.errorComponent?.config;i.message=e||i.message,this.errorComponent?.openErrorSnackbar()}showSuccessPopupMsg(e){let i=this.errorComponent?.config;i.customStyle="default-success-style",i.message=e||i.message,this.errorComponent?.openErrorSnackbar()}closeDeleteInfoForm(){this.dialogRef.close({})}static \u0275fac=function(i){return new(i||t)(D(V),D(j),D(w),D(P))};static \u0275cmp=_({type:t,selectors:[["delete-offer-dialog"]],viewQuery:function(i,l){if(i&1&&y(O,5),i&2){let f;R(f=b())&&(l.errorComponent=f.first)}},standalone:!0,features:[C],decls:21,vars:12,consts:[["mat-dialog-title","",1,"text-center"],[1,"text-center"],[1,"mat-typography"],[1,"archive-details-container"],[1,"d-flex","justify-center","g-20"],[1,"secondary-btn",3,"click"],["type","submit",1,"primary-btn",3,"click","IcmLoadingOverlay"],[1,"d-flex","justify-space-between","align-center"]],template:function(i,l){i&1&&(o(0,"h2",0),x(1,z,3,6)(2,W,3,6)(3,q,2,3),r(),o(4,"p",1),x(5,G,2,3)(6,K,2,3)(7,U,2,3),r(),o(8,"mat-dialog-content",2)(9,"div",3),x(10,H,12,8)(11,X,13,11)(12,Y,24,16),r()(),o(13,"div",4)(14,"button",5),u("click",function(){return l.closeDeleteInfoForm()}),n(15),d(16,"translate"),r(),o(17,"button",6),u("click",function(){return l.deleteOfferData()}),n(18),d(19,"translate"),r()(),E(20,"show-error-message")),i&2&&(a(),c(l.modelType=="agent"?1:l.modelType=="joinLink"?2:l.modelType=="risk"?3:-1),a(4),c(l.modelType=="agent"?5:l.modelType=="joinLink"?6:l.modelType=="risk"?7:-1),a(5),c(l.modelType=="agent"?10:-1),a(),c(l.modelType=="joinLink"?11:-1),a(),c(l.modelType=="risk"?12:-1),a(3),s(p(16,8,"COMMON.Cancel")),a(2),S("IcmLoadingOverlay",l.showLoader),a(),s(p(19,10,"PROVIDERS_PROFILE.Delete")))},dependencies:[Q,N,J,L,k,O,A,F,B],styles:[".delete-offer-dialog{width:600px!important;border-radius:10px!important}  .delete-offer-dialog .mat-mdc-dialog-title{margin:unset!important;padding-bottom:10px!important}  .delete-offer-dialog .mat-mdc-dialog-surface{border-radius:10px!important;background:#fff!important;padding:20px!important}  .delete-offer-dialog .common-field{width:100%!important}  .delete-offer-dialog .common-field .mdc-text-field{background-color:#fff;border:1px solid;border-bottom:0px}  .delete-offer-dialog .common-field .mdc-text-field textarea{resize:none}  .delete-offer-dialog .common-field .mdc-text-field .mat-mdc-form-field-text-suffix{font-size:20px}.archive-details-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;gap:30px;font-size:20px}"],changeDetection:0})}return t})();export{se as a};
