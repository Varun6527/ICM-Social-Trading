import{a as le}from"./chunk-W2EOEAFX.js";import"./chunk-ELFW3MCS.js";import{a as re}from"./chunk-ZMEXDH5L.js";import{b as ee,c as te}from"./chunk-BUFGAGPR.js";import{b as ae,e as oe}from"./chunk-KKB3U7AD.js";import{c as Y,i as Z,o as $,q as ie,r as ne,u as D,v as de}from"./chunk-BBDCSVIU.js";import{a as L}from"./chunk-D2HZNMZZ.js";import{Aa as U,Ea as J,Ga as K,Ma as X,O as W,Oa as E,T as j,U as G,V as z,va as H}from"./chunk-GPXXUB3O.js";import{$b as N,Bc as k,Da as h,Ha as g,Kc as Q,Lc as q,Ma as I,O as y,Qa as n,R as A,Ra as i,Rb as B,Sa as u,Sb as V,Va as w,W as f,X as v,Ya as x,_a as m,eb as F,fb as O,gb as R,lb as a,mb as d,nb as C,oa as t,pa as M,qb as b,rb as S,sb as P,ub as T,yb as s,zb as c}from"./chunk-VFCAWHKN.js";import"./chunk-XTLRYQGA.js";function se(l,_){if(l&1&&(n(0,"div",22)(1,"p"),a(2),i(),n(3,"h3"),a(4),i()()),l&2){let e=_.$implicit;t(2),d(e.name),t(2),d(e.count)}}function ce(l,_){if(l&1&&(n(0,"div",22)(1,"p"),a(2),i(),n(3,"h3"),a(4),i()()),l&2){let e=_.$implicit;t(2),d(e.name),t(2),d(e.value)}}function pe(l,_){if(l&1){let e=w();n(0,"button",14),x("click",function(){f(e);let r=m(2);return v(r.clearFilters())}),u(1,"img",23),a(2),s(3,"translate"),i()}l&2&&(t(2),C(" ",c(3,1,"COMMON.Clear")," "))}function me(l,_){if(l&1){let e=w();n(0,"mat-form-field")(1,"mat-label"),a(2),s(3,"translate"),i(),n(4,"input",24),P("ngModelChange",function(r){f(e);let p=m(2);return S(p.selectedFilters.id,r)||(p.selectedFilters.id=r),v(r)}),i()(),n(5,"mat-form-field")(6,"mat-label"),a(7),s(8,"translate"),i(),n(9,"input",24),P("ngModelChange",function(r){f(e);let p=m(2);return S(p.selectedFilters.externalAccount,r)||(p.selectedFilters.externalAccount=r),v(r)}),i()(),n(10,"mat-form-field")(11,"mat-label"),a(12),s(13,"translate"),i(),n(14,"input",25),P("ngModelChange",function(r){f(e);let p=m(2);return S(p.selectedFilters.nickName,r)||(p.selectedFilters.nickName=r),v(r)}),i()(),n(15,"mat-form-field")(16,"mat-label"),a(17),s(18,"translate"),i(),n(19,"mat-select",26),P("ngModelChange",function(r){f(e);let p=m(2);return S(p.selectedFilters.status,r)||(p.selectedFilters.status=r),v(r)}),x("selectionChange",function(){f(e);let r=m(2);return v(r.refreshProviderDataList())}),n(20,"mat-option",27),a(21),s(22,"translate"),i(),n(23,"mat-option",27),a(24),s(25,"translate"),i()()()}if(l&2){let e=m(2);t(2),d(c(3,12,"COMMON.Id")),t(2),b("ngModel",e.selectedFilters.id),t(3),d(c(8,14,"PROVIDERS.Trading Account")),t(2),b("ngModel",e.selectedFilters.externalAccount),t(3),d(c(13,16,"PROVIDERS.Nickname")),t(2),b("ngModel",e.selectedFilters.nickName),t(3),d(c(18,18,"PROVIDERS_PROFILE.Scope")),t(2),b("ngModel",e.selectedFilters.status),t(),g("value","Active"),t(),d(c(22,20,"COMMON.Active")),t(2),g("value","All"),t(),d(c(25,22,"COMMON.All"))}}function fe(l,_){l&1&&(u(0,"img",28),a(1),s(2,"translate")),l&2&&(t(),C(" ",c(2,1,"PROVIDERS_LIST.Search")," "))}function ve(l,_){l&1&&(u(0,"img",29),a(1),s(2,"translate")),l&2&&(t(),C(" ",c(2,1,"COMMON.Refresh")," "))}function _e(l,_){if(l&1){let e=w();n(0,"mat-card-content",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h5"),a(5),s(6,"translate"),i(),n(7,"p"),a(8),s(9,"translate"),i()()(),n(10,"div",7)(11,"div",8)(12,"h6"),a(13),s(14,"translate"),i(),n(15,"div",9)(16,"h5"),a(17),s(18,"translate"),i(),n(19,"h5"),a(20),i()(),n(21,"div",9)(22,"h5"),a(23),s(24,"translate"),i(),n(25,"h5"),a(26),i()()(),n(27,"div",8)(28,"h6"),a(29),s(30,"translate"),i(),h(31,se,5,2,"div",10),i(),n(32,"div",8)(33,"h6"),a(34),s(35,"translate"),i(),h(36,ce,5,2,"div",10),i(),n(37,"div",8)(38,"h6"),a(39),s(40,"translate"),i(),n(41,"div",9)(42,"h5"),a(43),s(44,"translate"),i(),n(45,"h5"),a(46),i()(),n(47,"div",9)(48,"h5"),a(49),s(50,"translate"),i(),n(51,"h5"),a(52),i()()()(),n(53,"div",11)(54,"div",12)(55,"div",13)(56,"button",14),x("click",function(){f(e);let r=m();return v(r.applyProvidersFilter())}),u(57,"img",15),a(58),s(59,"translate"),i(),h(60,pe,4,3,"button",16),i(),n(61,"div",17),h(62,me,26,24),n(63,"button",18),x("click",function(){f(e);let r=m();return v(r.refreshProviderDataList())}),h(64,fe,3,3)(65,ve,3,3),i(),n(66,"button",19),x("click",function(){f(e);let r=m();return v(r.openNewProviderDialog())}),u(67,"img",20),a(68),s(69,"translate"),i()()(),u(70,"common-ag-grid",21),i()()()}if(l&2){let e=m();t(5),d(c(6,24,"PROVIDERS.Providers")),t(3),d(c(9,26,"PROVIDERS.List of Providers")),t(5),d(c(14,28,"COMMON.Status")),t(4),d(c(18,30,"COMMON.Active")),t(3),d(e.providersDashBoardData==null?null:e.providersDashBoardData.activeCount),t(3),d(c(24,32,"COMMON.Inactive")),t(3),d(e.providersDashBoardData==null?null:e.providersDashBoardData.inActiveCount),t(3),d(c(30,34,"PROVIDERS.Popular Providers")),t(2),g("ngForOf",e.providersDashBoardData.popularProvidersArr),t(3),d(c(35,36,"PROVIDERS.Profitable Providers")),t(2),g("ngForOf",e.providersDashBoardData.profitableProvidersArr),t(3),d(c(40,38,"PROVIDERS.Performance Fee")),t(4),d(c(44,40,"PROVIDERS.This month")),t(3),d(e.providersDashBoardData==null?null:e.providersDashBoardData.currentMonthPerformanceFee),t(3),d(c(50,42,"PROVIDERS.Previous month")),t(3),d(e.providersDashBoardData==null?null:e.providersDashBoardData.previousMonthPerformanceFee),t(6),C(" ",c(59,44,"COMMON.Filters")," "),t(2),g("ngIf",e.showFilters),t(2),I(e.showFilters?62:-1),t(2),I(e.selectedFilters.nickName||e.selectedFilters.externalAccount||e.selectedFilters.id?64:65),t(4),C(" ",c(69,46,"COMMON.Create")," "),t(2),g("gridConfig",e.gridConfig)("gridData",e.providersTableData)("showGridLoader",e.showGridLoader)}}function ge(l,_){l&1&&(n(0,"div",30),u(1,"img",31),i())}var Qe=(()=>{class l{_webService;_router;showPageLoader=!1;showGridLoader=!1;selectedFilters={nickName:"",externalAccount:"",id:"",status:"Active"};filterEnabled=!1;providersDashBoardData;providersTableData=[];gridConfig;beProviderDialog=y(Y);errorComponent;showFilters=!1;constructor(e,o){this._webService=e,this._router=o,this._webService.subscribeOnWebDataChange("ProvidersStandAloneComponent",r=>{this.recieveChildrenEmitter(r)}),this.setupProviderTableConfig(),this.getProviderDashboardData(),this.getProvidersTableData()}setupProviderTableConfig(){let e=[{field:"nickName",headerName:"PROVIDERS.Nickname",resizable:!1,suppressSizeToFit:!0,cellRenderer:D,colId:"providerNameCell",width:250},{field:"tradingAccount",sortable:!1,headerName:"PROVIDERS.Trading Account",resizable:!1,cellRenderer:D,colId:"providerTradingAccountCell"},{field:"strategyMode",headerName:"PROVIDERS.Strategy Mode",resizable:!1,cellRenderer:D,colId:"tagCell"},{field:"equity",headerName:"PROVIDERS.Equity",resizable:!1},{field:"registerTime",headerName:"PROVIDERS.Registered",resizable:!1,flex:1},{field:"actions",sortable:!1,headerName:"",cellRenderer:re,flex:1,colId:"providerProfileRedirection"}];this.setupGridConfig(e)}setupGridConfig(e){this.gridConfig={maxHeight:"400px",noDataWarnMessage:"There are no providers",gridOptions:{},agGridTheme:"ag-theme-alpine",pageSizeDropdownArr:[25,50,100],initialSelectedPageSize:25,columnDefination:e,enablePagination:!0,headerNameLangArr:e.map(o=>o.headerName),rowModelType:"clientSide",rowHeight:void 0}}getProviderDashboardData(){this.showPageLoader=!0,this._webService.getProviderDashboardDetails().subscribe({next:e=>{this.providersDashBoardData={},this.providersDashBoardData=new ae(e),this.showPageLoader=!1},error:e=>{this.showErrorWarnMessage(e?.error?.errorMessage),this.showPageLoader=!1},complete:()=>{this.showPageLoader=!1}})}getProvidersTableData(){this.showGridLoader=!0;let e=this.getProvdersParam();this._webService.getProviderData(e).subscribe({next:o=>{this.providersTableData=[],o.items.forEach(r=>this.providersTableData.push(new oe(r))),this.showGridLoader=!1},error:o=>{this.showGridLoader=!1,this.showErrorWarnMessage(o?.error?.errorMessage)},complete:()=>{this.showGridLoader=!1}})}getProvdersParam(){let e={scope:this.selectedFilters.status,$count:!0};return this.getFilterQuery()&&(e.$filter=this.getFilterQuery()),e}getFilterQuery(){let e="";return this.selectedFilters.externalAccount&&(e+=`externalAccount eq ${this.selectedFilters.externalAccount} and `),this.selectedFilters.id&&(e+=`id eq ${this.selectedFilters.id} and `),this.selectedFilters.nickName&&(e+=`contains(tolower(nickname), '${this.selectedFilters.nickName}') and `),e?e.slice(0,-4):""}showErrorWarnMessage(e){let o=this.errorComponent?.config;o.message=e||o.message,this.errorComponent?.openErrorSnackbar()}openNewProviderDialog(){this.beProviderDialog.open(le,{panelClass:"beProvider-dialog"}),this.beProviderDialog.afterAllClosed.subscribe(()=>{})}toggleFilter(){this.filterEnabled=!this.filterEnabled}recieveChildrenEmitter(e){if(e.action=="provider_created"){let o=e.data;this._router.navigate([`/portal/providers/${o.id}`]),this.beProviderDialog.closeAll()}}refreshProviderDataList(){this.getProvidersTableData()}applyProvidersFilter(){this.showFilters?(this.showFilters=!1,this.clearFilters()):this.showFilters=!0}clearFilters(){this.resetFilter(),this.getProvidersTableData()}resetFilter(){this.selectedFilters={nickName:"",externalAccount:"",id:"",status:"Active"}}ngOnDestroy(){this._webService.unSubscribeOnWebDataChange("ProvidersStandAloneComponent")}static \u0275fac=function(o){return new(o||l)(M(L),M(k))};static \u0275cmp=A({type:l,selectors:[["app-providers"]],viewQuery:function(o,r){if(o&1&&F(E,5),o&2){let p;O(p=R())&&(r.errorComponent=p.first)}},standalone:!0,features:[T],decls:4,vars:2,consts:[["appearance","outlined",1,"section-card"],["class","section-card-content",4,"ngIf"],["class","full-view-port-height d-flex justify-center align-center",4,"ngIf"],[1,"section-card-content"],[1,"home-card"],[1,"header","d-flex","justify-space-between","align-center"],[1,"header-title"],[1,"stats","d-flex","justify-space-between","g-20"],[1,"stats-card"],[1,"stats-info"],["class","d-flex justify-space-between flex-column",4,"ngFor","ngForOf"],[1,"metrics-table"],[1,"header-buttons","d-flex","justify-space-between"],[1,"d-flex","g-20","justify-center","align-center"],[1,"secondary-btn",3,"click"],["src","../../../../assets/icons/filterIcon.svg"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"d-flex","g-20","common-dropdown","align-center"],[1,"refresh-btn",3,"click"],[1,"primary-btn",3,"click"],["src","../../../../assets/icons/plusIcon.png"],[3,"gridConfig","gridData","showGridLoader"],[1,"d-flex","justify-space-between","flex-column"],["width","20","src","../../../../assets/icons/clear-icon.svg"],["matInput","","type","number",3,"ngModelChange","ngModel"],["matInput","","type","text",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["src","../../../../assets/icons/searchIcon.svg"],["src","../../../../assets/icons/rotateIcon.svg"],[1,"full-view-port-height","d-flex","justify-center","align-center"],["src","../../../../assets/logo/ICM Logo Default 1.png"]],template:function(o,r){o&1&&(n(0,"mat-card",0),h(1,_e,71,48,"mat-card-content",1)(2,ge,2,0,"div",2),i(),u(3,"show-error-message")),o&2&&(t(),g("ngIf",!r.showPageLoader),t(),g("ngIf",r.showPageLoader))},dependencies:[N,B,V,z,j,G,ne,$,Z,ie,W,te,ee,X,H,K,U,J,q,Q,de,E],styles:[".stats-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.stats-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px}.stats-subline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:#027a48}.stats-subline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:#b42318}  .common-dropdown .mdc-text-field{background-color:var(--primaryWhite)!important;border:1px solid var(--border-color)!important;border-bottom:0px!important;border-radius:8px!important;width:150px}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .mat-mdc-form-field-subscript-wrapper{display:none}.refresh-btn[_ngcontent-%COMP%]{background:#fff;color:#000;border-radius:8px;font-weight:500;font-size:18px;border:1px solid #D0D5DD;padding:12px 18px;display:flex;justify-content:space-between;gap:10px;align-items:center;cursor:pointer;min-height:56px;transition:background-color .3s linear,border-radius .3s linear,padding .3s linear,width .3s linear;margin-bottom:0}"]})}return l})();export{Qe as ProvidersStandAloneComponent};
