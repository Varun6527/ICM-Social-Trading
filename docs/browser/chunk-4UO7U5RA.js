import{b as J,c as de}from"./chunk-HHAISXMQ.js";import{a as z}from"./chunk-2M5NFKPA.js";import{a as ce}from"./chunk-ELFW3MCS.js";import{Aa as oe,Ba as re,Fa as ae,Ga as le,Ha as pe,Ia as se,La as ge,Na as me,Oa as S,T as G,U as Q,V as W,W as $,Y as H,qa as K,ra as X,sa as Y,ta as Z,va as ie,xa as P}from"./chunk-GPXXUB3O.js";import{$b as D,Aa as I,Bc as U,Da as _,Ha as g,Jc as ee,Kc as te,Lc as ne,Qa as n,Qb as R,R as y,Ra as o,Rb as q,Sa as u,Sb as j,Ta as E,Ua as L,Va as x,W as M,X as v,Ya as b,_a as w,eb as B,fb as k,gb as A,kb as T,lb as r,mb as c,na as F,nb as d,oa as e,pa as C,ub as V,wb as O,yb as l,zb as p,zc as N}from"./chunk-VFCAWHKN.js";import"./chunk-XTLRYQGA.js";var ue=i=>({"show-error":i});function Ce(i,f){if(i&1&&(E(0),r(1),L()),i&2){let a=w().$implicit;e(),d(" (",a.displayLabel,") ")}}function _e(i,f){if(i&1){let a=x();n(0,"button",32),b("click",function(){let t=M(a).$implicit,m=w();return v(m.selectLanguage(t))}),r(1),_(2,Ce,2,1,"ng-container",33),o()}if(i&2){let a=f.$implicit;e(),d(" ",a.name," "),e(),g("ngIf",a.code!=="en")}}function he(i,f){i&1&&(n(0,"label",34),r(1),l(2,"translate"),o()),i&2&&(e(),c(p(2,1,"login.TradingAccountId")))}function Me(i,f){i&1&&(n(0,"label",35),r(1),l(2,"translate"),o()),i&2&&(e(),d(" ",p(2,1,"login.FieldRequired")," "))}function ve(i,f){i&1&&(n(0,"label",34),r(1),l(2,"translate"),o()),i&2&&(e(),c(p(2,1,"login.TradingAccountPassword")))}function be(i,f){i&1&&(n(0,"label",35),r(1),l(2,"translate"),o()),i&2&&(e(),d(" ",p(2,1,"login.FieldRequired")," "))}var Ue=(()=>{class i extends de{activatedRoute;router;translate;fb;_authService;loginForm;showLoginFormError=!1;errorComponent;redirectUrl;showLoader;constructor(a,s,t,m,h){super(t,h),this.activatedRoute=a,this.router=s,this.translate=t,this.fb=m,this._authService=h,this.loginForm=this.fb.group({username:["",[P.required]],password:["",[P.required]]}),this.activatedRoute.queryParams.subscribe(fe=>{this.redirectUrl=fe.redirectUrl})}get getControl(){return this.loginForm.controls}checkLength(){let a=this.getControl.username.value;a?.toString().length>16&&(a=a.toString().slice(0,16),this.getControl.username.setValue(parseInt(a)),this.getControl.username.updateValueAndValidity())}loginUser(){if(this.loginForm.invalid){this.showLoginFormError=!0;return}this.showLoader=!0;let a={username:this.getControl.username.value,password:this.getControl.password.value,grant_type:"password"};this._authService.loginUser(a).subscribe({next:s=>{this._authService.tokenObject=s,this.router.navigate([this.redirectUrl?this.redirectUrl:"./portal"])},error:s=>{console.error(s?.error?.error_description),this.showErrorWarnMessage(s?.error?.error_description),this.showLoader=!1}})}showErrorWarnMessage(a){let s=this.errorComponent?.config;s.message="Wrong login or password. Use login and password from MetaTrader server",this.errorComponent?.openErrorSnackbar()}static \u0275fac=function(s){return new(s||i)(C(N),C(U),C(ee),C(ge),C(z))};static \u0275cmp=y({type:i,selectors:[["app-login"]],viewQuery:function(s,t){if(s&1&&B(S,5),s&2){let m;k(m=A())&&(t.errorComponent=m.first)}},standalone:!0,features:[I,V],decls:78,vars:54,consts:[["languageMenu","matMenu"],[1,"login-screen"],[1,"login-card"],[1,"login-card-header"],[1,"button-row"],[1,"theme-btn"],["src","../../../assets/icons/sun.png"],[1,"flag-btn",3,"matMenuTriggerFor"],["height","24","width","24",3,"src"],[1,"languageMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["src","../../../assets/logo/ICM Logo Default 1.png",1,"login-logo"],[1,"login-text-content"],["id","clientLoginForm",3,"ngSubmit","formGroup"],[1,"login-form"],[1,"login-form-content",3,"ngClass"],[1,"input-div"],[1,"lb-title"],["type","number","formControlName","username",3,"input"],["class","lb-detail",4,"ngIf"],["class","lb-detail warn-msg",4,"ngIf"],["type","password","formControlName","password"],[1,"login-form-actions"],[1,"remember-me"],["type","checkbox"],[1,"forgot-password"],[1,"login-form-button"],["mat-flat-button","","type","submit",3,"IcmLoadingOverlay"],[1,"register"],[1,"login-form-footer"],["href","https://track.icmcapital.com/?t=copytrading&lang=en"],["href","https://clients.icmcapital.mu/auth/login"],["mat-menu-item","",3,"click"],[4,"ngIf"],[1,"lb-detail"],[1,"lb-detail","warn-msg"]],template:function(s,t){if(s&1){let m=x();n(0,"div",1)(1,"mat-card",2)(2,"div",3)(3,"div",4)(4,"button",5),u(5,"img",6),o(),n(6,"button",7),u(7,"img",8),o(),n(8,"mat-menu",9,0),_(10,_e,3,2,"button",10),o()()(),n(11,"mat-card-content"),u(12,"img",11),n(13,"div",12)(14,"h4"),r(15,"Social Trading"),o(),n(16,"p"),r(17),l(18,"translate"),o(),n(19,"p"),r(20),l(21,"translate"),o()(),n(22,"form",13),b("ngSubmit",function(){return M(m),v(t.loginUser())}),n(23,"div",14)(24,"div",15)(25,"div",16)(26,"label",17),r(27),l(28,"translate"),o(),n(29,"input",18),b("input",function(){return M(m),v(t.checkLength())}),o(),_(30,he,3,3,"label",19)(31,Me,3,3,"label",20),o()(),n(32,"div",15)(33,"div",16)(34,"label",17),r(35),l(36,"translate"),o(),u(37,"input",21),_(38,ve,3,3,"label",19)(39,be,3,3,"label",20),o()()(),n(40,"div",22)(41,"div",23),u(42,"input",24),n(43,"p"),r(44),l(45,"translate"),o()(),n(46,"div",25)(47,"p"),r(48),l(49,"translate"),o()()(),n(50,"div",26)(51,"a")(52,"button",27),r(53),l(54,"translate"),o()()()(),n(55,"div",22)(56,"div",28)(57,"p"),r(58),l(59,"translate"),o()(),n(60,"div",28)(61,"p"),r(62),l(63,"translate"),o()()(),n(64,"div",29)(65,"p"),r(66),l(67,"translate"),n(68,"a",30),r(69),l(70,"translate"),o()(),n(71,"p"),r(72),l(73,"translate"),n(74,"a",31),r(75),l(76,"translate"),o()()()()()(),u(77,"show-error-message")}if(s&2){let m=T(9);e(6),g("matMenuTriggerFor",m),e(),g("src","../../../assets/icons/"+t.selectedLangObj.icon,F),e(3),g("ngForOf",t.languages),e(7),c(p(18,24,"login.Client portal")),e(3),c(p(21,26,"login.Register")),e(2),g("formGroup",t.loginForm),e(2),g("ngClass",O(50,ue,t.showLoginFormError&&(t.loginForm.controls.username.errors==null?null:t.loginForm.controls.username.errors.required))),e(3),d(" ",p(28,28,"login.Username")," * "),e(3),g("ngIf",!t.showLoginFormError||!(t.loginForm.controls.username.errors!=null&&t.loginForm.controls.username.errors.required)),e(),g("ngIf",t.showLoginFormError&&(t.loginForm.controls.username.errors==null?null:t.loginForm.controls.username.errors.required)),e(),g("ngClass",O(52,ue,t.showLoginFormError&&(t.loginForm.controls.password.errors==null?null:t.loginForm.controls.password.errors.required))),e(3),d(" ",p(36,30,"login.Password")," * "),e(3),g("ngIf",!t.showLoginFormError||!(t.loginForm.controls.password.errors!=null&&t.loginForm.controls.password.errors.required)),e(),g("ngIf",t.showLoginFormError&&(t.loginForm.controls.password.errors==null?null:t.loginForm.controls.password.errors.required)),e(5),c(p(45,32,"login.Remember30days")),e(4),c(p(49,34,"login.ForgotPassword")),e(4),g("IcmLoadingOverlay",t.showLoader),e(),c(p(54,36,"login.Log In")),e(5),c(p(59,38,"login.RegisterProvider")),e(4),c(p(63,40,"login.RegisterFollower")),e(4),d(" ",p(67,42,"login.RegisterICMAccount"),". "),e(3),d(" ",p(70,44,"login.Clickhere"),"! "),e(3),d(" ",p(73,46,"login.ExistingICMAccount"),". "),e(3),d(" ",p(76,48,"login.Clickhere"),"! ")}},dependencies:[D,R,q,j,W,G,Q,H,$,J,Z,X,K,Y,ne,te,me,ae,ie,le,oe,re,pe,se,S,ce],styles:[".login-screen[_ngcontent-%COMP%]{padding:50px}.login-card-header[_ngcontent-%COMP%]{padding:20px;border-bottom:2px solid #F0F0F0}.login-card-header[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px}.login-card-header[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .theme-btn[_ngcontent-%COMP%]{box-shadow:unset!important;border-radius:8px;background:#fff;border:1px solid var(--primaryBlue);width:70px;height:50px;display:flex;align-items:center;justify-content:center}.login-card-header[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .flag-btn[_ngcontent-%COMP%]{box-shadow:unset!important;border-radius:8px;background:var(--primaryBlue);width:70px;height:50px;display:flex;align-items:center;justify-content:center;border:unset;cursor:pointer}.login-card[_ngcontent-%COMP%]{width:450px;min-height:800px;display:block;margin:0 auto;border-radius:8px;background-color:#fff}.login-logo[_ngcontent-%COMP%]{display:block;width:120px;margin:0 auto;padding-top:25px}.login-text-content[_ngcontent-%COMP%]{text-align:center;padding-block:20px}.login-text-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:unset!important;font-size:30px;font-weight:500}.login-text-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:unset!important;color:#667085;padding:10px}.login-form[_ngcontent-%COMP%]{padding:25px}.login-form-content[_ngcontent-%COMP%]{padding-bottom:20px}.login-form-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-form-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]   .lb-title[_ngcontent-%COMP%]{margin-bottom:5px;color:#344054;font-size:14px}.login-form-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]   .lb-detail[_ngcontent-%COMP%]{font-size:10px}.login-form-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]   .warn-msg[_ngcontent-%COMP%]{color:red}.login-form-content[_ngcontent-%COMP%]   .input-div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border-radius:8px;border:1px solid #D0D5DD;padding:0 10px;font-size:15px}.login-form-content.show-error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:2px solid red!important}.login-form-actions[_ngcontent-%COMP%]{display:flex;padding:0 25px;justify-content:space-between;gap:20px}.login-form-actions[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;color:#344054;font-size:14px}.login-form-actions[_ngcontent-%COMP%]   .remember-me[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:unset}.login-form-actions[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]{cursor:pointer}.login-form-actions[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:unset;color:var(--primaryBlue);font-weight:500}.login-form-actions[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{cursor:pointer}.login-form-actions[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:unset;color:var(--primaryBlue);font-weight:500;border-bottom:1px dashed var(--primaryBlue)}.login-form-button[_ngcontent-%COMP%]{padding:25px}.login-form-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;width:100%;background-color:var(--primaryBlue);color:#fff}.login-form-footer[_ngcontent-%COMP%]{padding:25px}.login-form-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#667085;text-align:center;font-size:14px;margin:unset}.login-form-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primaryBlue);text-decoration:none}  .languageMenu .mat-mdc-menu-panel{background-color:var(--mat-select-panel-background-color)}  .languageMenu .mat-mdc-menu-content{height:240px;background-color:var(--mat-select-panel-background-color)}  .languageMenu .mat-mdc-menu-item{padding-left:20px;padding-right:20px;background-color:var(--mat-select-panel-background-color)}  .languageMenu .mat-mdc-menu-item .mat-mdc-menu-item-text{font-size:17px!important;display:flex;gap:20px;align-items:center}"]})}return i})();export{Ue as LoginStandAloneComponent};
