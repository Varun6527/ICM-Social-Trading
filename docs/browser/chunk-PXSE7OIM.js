import{a as L}from"./chunk-AGXGLGFY.js";import{a as V}from"./chunk-ZMEXDH5L.js";import{a as xe,b as Oe,c as Se,d as he}from"./chunk-TKIWTXAB.js";import{c as ue}from"./chunk-BUFGAGPR.js";import{f as Ee,q as Ce}from"./chunk-KKB3U7AD.js";import{c as T,i as ge,o as Pe,q as Ie,r as ve,u as O,v as Re}from"./chunk-BBDCSVIU.js";import{a as ne}from"./chunk-D2HZNMZZ.js";import{Aa as ce,Ea as me,Ma as _e,O as ae,Oa as fe,T as oe,U as re,V as le,ta as se}from"./chunk-GPXXUB3O.js";import{$b as X,Ab as M,Bb as E,Bc as Z,Cb as F,Cc as ee,Da as g,Ec as te,Ha as f,Hc as ie,Kc as pe,Lc as de,Ma as S,O as y,Qa as i,R as B,Ra as n,Rb as K,Sa as I,Sb as Q,Va as R,W as v,X as x,Ya as h,Zb as J,_a as _,_b as b,bb as N,eb as k,fb as U,gb as j,lb as a,mb as o,nb as P,oa as t,ob as z,pa as C,qb as G,rb as W,sb as $,tb as q,ub as H,wb as w,yb as l,zb as s,zc as Y}from"./chunk-VFCAWHKN.js";import{f as A}from"./chunk-XTLRYQGA.js";var be=r=>["/portal/providers",r],De=r=>["/portal/subscriptions",r];function Me(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"PROVIDERS_PROFILE.Position")," ")}function ye(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"PROVIDERS_PROFILE.MetaTrader position ID")," ")}function we(r,m){if(r&1&&(i(0,"div",13)(1,"h6"),a(2),l(3,"translate"),n(),i(4,"p")(5,"span"),a(6),n()()()),r&2){let e=_(2);t(2),o(s(3,2,"PROVIDERS_PROFILE.State")),t(4),o(e.positionData.state)}}function Fe(r,m){if(r&1&&(i(0,"div",13)(1,"h6"),a(2),l(3,"translate"),n(),i(4,"p")(5,"span"),a(6),n()()()),r&2){let e=_(2);t(2),o(s(3,2,"COMMON.Status")),t(4),o(e.positionData.status)}}function Te(r,m){if(r&1&&(i(0,"div",13)(1,"h6"),a(2),l(3,"translate"),n(),i(4,"p")(5,"span"),a(6),n()()()),r&2){let e=_(2);t(2),o(s(3,2,"PROVIDERS_PROFILE.Symbol")),t(4),o(e.positionData.symbol)}}function Ve(r,m){if(r&1&&(i(0,"div",13)(1,"h6"),a(2),l(3,"translate"),n(),i(4,"p")(5,"span"),a(6),n()()()),r&2){let e=_(2);t(2),o(s(3,2,"PROVIDERS_PROFILE.Symbol")),t(4),o(e.positionData.symbol)}}function Le(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"PROVIDERS_PROFILE.Provider position's close data")," ")}function Ae(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"PROVIDERS_PROFILE.Follower position's close data")," ")}function Be(r,m){if(r&1&&(i(0,"div",9)(1,"div",10)(2,"h4"),a(3),l(4,"translate"),n(),i(5,"p"),a(6),l(7,"translate"),n()(),i(8,"div",11)(9,"mat-card",12)(10,"div",13)(11,"h6"),a(12),l(13,"translate"),n(),i(14,"p")(15,"span"),a(16),n()()(),i(17,"div",13)(18,"h6"),a(19),l(20,"translate"),n(),i(21,"p")(22,"span"),a(23),n()()(),i(24,"div",13)(25,"h6"),a(26),l(27,"translate"),n(),i(28,"p")(29,"span"),a(30),n()()()()()()),r&2){let e=_(2);t(3),o(s(4,8,"PROVIDERS_PROFILE.Copy data")),t(3),o(s(7,10,"PROVIDERS_PROFILE.Position's copy data")),t(6),o(s(13,12,"PROVIDERS_PROFILE.Copied volume")),t(4),o(e.positionStatsData.copiedVolume),t(3),o(s(20,14,"PROVIDERS_PROFILE.Copied count")),t(4),o(e.positionStatsData.copiedCount),t(3),o(s(27,16,"PROVIDERS_PROFILE.Closed count")),t(4),o(e.positionStatsData.closedCount)}}function Ne(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"HOME.Provider")," ")}function ke(r,m){r&1&&(a(0),l(1,"translate")),r&2&&P(" ",s(1,1,"TRANSACTIONS.Subscription")," ")}function Ue(r,m){if(r&1&&(i(0,"div",20)(1,"div",21)(2,"h6"),a(3),l(4,"translate"),n()(),i(5,"div",22)(6,"h6")(7,"a",30)(8,"span"),a(9),n()()()()()),r&2){let e=_(2);t(3),o(s(4,3,"HOME.Nickname")),t(4),f("routerLink",w(5,be,e.providersData.id)),t(2),o(e.providersData==null?null:e.providersData.nickname)}}function je(r,m){if(r&1&&(i(0,"div",20)(1,"div",21)(2,"h6"),a(3),l(4,"translate"),n()(),i(5,"div",22)(6,"h6")(7,"a",30)(8,"span"),a(9),n()()()()()),r&2){let e=_(2);t(3),o(s(4,3,"TRANSACTIONS.Subscription")),t(4),f("routerLink",w(5,De,e.subscriptionData.id)),t(2),P("Subscription #",e.subscriptionData.id,"")}}function ze(r,m){if(r&1){let e=R();i(0,"button",35),h("click",function(){v(e);let d=_(2).$implicit,c=_(2);return x(c.clearFilters(d))}),I(1,"img",40),a(2),l(3,"translate"),n()}r&2&&(t(2),P(" ",s(3,1,"COMMON.Clear")," "))}function Ge(r,m){if(r&1){let e=R();i(0,"mat-form-field")(1,"mat-label"),a(2),l(3,"translate"),n(),i(4,"mat-select",42),$("ngModelChange",function(d){v(e);let c=_(3).$implicit;return W(c.filters.type.entry,d)||(c.filters.type.entry=d),x(d)}),i(5,"mat-option",43),a(6),l(7,"translate"),n(),i(8,"mat-option",43),a(9),l(10,"translate"),n(),i(11,"mat-option",43),a(12,"-"),n()()()}if(r&2){let e=_(3).$implicit;t(2),o(s(3,7,"PROVIDERS_PROFILE.Entry")),t(2),G("ngModel",e.filters.type.entry),t(),f("value","In"),t(),o(s(7,9,"PROVIDERS_PROFILE.In")),t(2),f("value","Out"),t(),o(s(10,11,"PROVIDERS_PROFILE.Out")),t(2),f("value",void 0)}}function We(r,m){if(r&1&&g(0,Ge,13,13,"mat-form-field",41),r&2){let e=_(2).$implicit;f("ngIf",e.filters.type.hasOwnProperty("entry"))}}function $e(r,m){r&1&&(I(0,"img",44),a(1),l(2,"translate")),r&2&&(t(),P(" ",s(2,1,"PROVIDERS_LIST.Search")," "))}function qe(r,m){r&1&&(I(0,"img",45),a(1),l(2,"translate")),r&2&&(t(),P(" ",s(2,1,"COMMON.Refresh")," "))}function He(r,m){if(r&1){let e=R();i(0,"div",33)(1,"div",34)(2,"button",35),h("click",function(){v(e);let d=_().$implicit,c=_(2);return x(c.applyFilters(d))}),I(3,"img",36),a(4),l(5,"translate"),n(),g(6,ze,4,3,"button",37),n(),i(7,"div",38),g(8,We,1,1,"mat-form-field"),i(9,"button",35),h("click",function(){v(e);let d=_().$implicit,c=_(2);return x(c.refreshDataList(d))}),g(10,$e,3,3)(11,qe,3,3),n()()(),I(12,"common-ag-grid",39)}if(r&2){let e=_().$implicit;t(4),P(" ",s(5,7,"COMMON.Filters")," "),t(2),f("ngIf",e.filters.show),t(2),S(e.filters.show?8:-1),t(2),S(10),t(2),f("gridConfig",e.grid.config)("gridData",e.grid.data)("showGridLoader",e.grid.showLoader)}}function Ke(r,m){if(r&1&&(i(0,"mat-tab",31),l(1,"translate"),g(2,He,13,9,"ng-template",32),n()),r&2){let e=m.$implicit;N("label",s(1,1,e.label))}}function Qe(r,m){if(r&1){let e=R();i(0,"mat-card-content",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h5"),a(5),l(6,"translate"),n(),i(7,"p"),a(8),l(9,"translate"),n()()(),i(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h4"),a(15),l(16,"translate"),n(),i(17,"p"),a(18),l(19,"translate"),n()(),i(20,"div",11)(21,"mat-card",12)(22,"div",13)(23,"h6"),g(24,Me,2,3)(25,ye,2,3),n(),i(26,"p")(27,"span"),a(28),n()()(),g(29,we,7,4,"div",14)(30,Fe,7,4,"div",14),i(31,"div",13)(32,"h6"),a(33),l(34,"translate"),n(),i(35,"p")(36,"span"),a(37),n()()(),g(38,Te,7,4,"div",14),n()()(),i(39,"div",9)(40,"div",10)(41,"h4"),a(42),l(43,"translate"),n(),i(44,"p"),a(45),l(46,"translate"),n()(),i(47,"div",11)(48,"mat-card",12),g(49,Ve,7,4,"div",14),i(50,"div",13)(51,"h6"),a(52),l(53,"translate"),n(),i(54,"p")(55,"span"),a(56),n()()(),i(57,"div",13)(58,"h6"),a(59),l(60,"translate"),n(),i(61,"p")(62,"span"),a(63),n()()(),i(64,"div",13)(65,"h6"),a(66),l(67,"translate"),n(),i(68,"p")(69,"span"),a(70),l(71,"currency"),n()()(),i(72,"div",13)(73,"h6"),a(74),l(75,"translate"),n(),i(76,"p")(77,"span"),a(78),l(79,"date"),n()()()()()(),i(80,"div",9)(81,"div",10)(82,"h4"),a(83),l(84,"translate"),n(),i(85,"p"),g(86,Le,2,3)(87,Ae,2,3),n()(),i(88,"div",11)(89,"mat-card",12)(90,"div",13)(91,"h6"),a(92),l(93,"translate"),n(),i(94,"p")(95,"span"),a(96),l(97,"currency"),n()()(),i(98,"div",13)(99,"h6"),a(100),l(101,"translate"),n(),i(102,"p")(103,"span"),a(104),l(105,"date"),n()()(),i(106,"div",13)(107,"h6"),a(108),l(109,"translate"),n(),i(110,"p")(111,"span"),a(112),n()()()()()(),i(113,"div",9)(114,"div",10)(115,"h4"),a(116),l(117,"translate"),n(),i(118,"p"),a(119),l(120,"translate"),n()(),i(121,"div",11)(122,"mat-card",12)(123,"div",13)(124,"h6"),a(125),l(126,"translate"),n(),i(127,"p")(128,"span"),a(129),l(130,"currency"),n()()(),i(131,"div",13)(132,"h6"),a(133),l(134,"translate"),n(),i(135,"p")(136,"span"),a(137),l(138,"currency"),n()()(),i(139,"div",13)(140,"h6"),a(141),l(142,"translate"),n(),i(143,"p")(144,"span"),a(145),l(146,"currency"),n()()(),i(147,"div",13)(148,"h6"),a(149),l(150,"translate"),n(),i(151,"p")(152,"span"),a(153),l(154,"currency"),n()()(),i(155,"div",13)(156,"h6"),a(157),l(158,"translate"),n(),i(159,"p")(160,"span"),a(161),l(162,"currency"),n()()()()()(),g(163,Be,31,18,"div",15),n(),i(164,"div",16)(165,"div",17)(166,"h4"),a(167),l(168,"translate"),n(),i(169,"p"),a(170),l(171,"translate"),n()(),I(172,"hr"),i(173,"div",18)(174,"mat-card",12)(175,"div",19)(176,"div",5)(177,"h6"),a(178),l(179,"translate"),n()(),i(180,"div",20)(181,"div",21)(182,"h6"),a(183),l(184,"translate"),n()(),i(185,"div",22)(186,"h6",23),a(187),n()()(),i(188,"div",20)(189,"div",21)(190,"h6"),a(191),l(192,"translate"),n()(),i(193,"div",22)(194,"h6",23),a(195),n()()()(),i(196,"div",19)(197,"div",5)(198,"h6"),a(199),l(200,"translate"),n(),i(201,"a",24),h("click",function(){v(e);let d=_();return x(d.openBeTradingAccountPopup())}),I(202,"img",25),n()(),i(203,"div",20)(204,"div",21)(205,"h6"),a(206),l(207,"translate"),n()(),i(208,"div",22)(209,"h6"),a(210),n()()(),i(211,"div",20)(212,"div",21)(213,"h6"),a(214),l(215,"translate"),n()(),i(216,"div",22)(217,"h6"),a(218),n()()(),i(219,"div",20)(220,"div",21)(221,"h6"),a(222),l(223,"translate"),n()(),i(224,"div",22)(225,"h6",23),a(226),n()()()(),i(227,"div",19)(228,"div",5)(229,"h6"),g(230,Ne,2,3)(231,ke,2,3),n()(),g(232,Ue,10,7,"div",26)(233,je,10,7,"div",26),i(234,"div",20)(235,"div",21)(236,"h6"),a(237),l(238,"translate"),n()(),i(239,"div",22)(240,"h6",23),a(241),n()()(),i(242,"div",20)(243,"div",21)(244,"h6"),a(245),l(246,"translate"),n()(),i(247,"div",22)(248,"h6"),a(249),l(250,"date"),n()()()()()()()(),i(251,"div",27)(252,"mat-tab-group",28),h("selectedTabChange",function(d){v(e);let c=_();return x(c.onTabChange(d))}),g(253,Ke,3,3,"mat-tab",29),n()()()()}if(r&2){let e=_();t(5),z("",s(6,66,"PROVIDERS_PROFILE.Position")," #",e.positionId,""),t(3),o(s(9,68,"PROVIDERS_PROFILE.Information about the position")),t(7),o(s(16,70,"PROVIDERS_PROFILE.Common Information")),t(3),o(s(19,72,"PROVIDERS_PROFILE.Common position's information")),t(6),S(e.isProvider?24:25),t(4),o(e.positionData.position),t(),f("ngIf",e.isFollower),t(),f("ngIf",e.isFollower),t(3),o(s(34,74,"PROVIDERS_PROFILE.Untrack status")),t(4),o(e.positionData.untrackStatus),t(),f("ngIf",e.isProvider),t(4),o(s(43,76,"PROVIDERS_PROFILE.Opening Data")),t(3),o(s(46,78,"PROVIDERS_PROFILE.Position's opening data")),t(4),f("ngIf",e.isFollower),t(3),o(s(53,80,"PROVIDERS_PROFILE.Direction")),t(4),o(e.positionData.currentDirection),t(3),o(s(60,82,"PROVIDERS_PROFILE.Open volume")),t(4),o(e.positionData.openVolume),t(3),o(s(67,84,"PROVIDERS_PROFILE.Open price")),t(4),o(F(71,86,e.positionData.openPrice,"USD","","")),t(4),o(s(75,91,"PROVIDERS_PROFILE.Open time")),t(4),o(M(79,93,e.positionData.openTime,"M/d/yy, h:mm:ss a")),t(5),o(s(84,96,"PROVIDERS_PROFILE.Close Data")),t(3),S(e.isProvider?86:87),t(6),o(s(93,98,"PROVIDERS_PROFILE.Close price")),t(4),o(F(97,100,e.positionData.closePrice,"USD","","")),t(4),o(s(101,105,"PROVIDERS_PROFILE.Close time")),t(4),o(M(105,107,e.positionData.closeTime,"M/d/yy, h:mm:ss a")),t(4),o(s(109,110,"PROVIDERS_PROFILE.Take Profit")),t(4),o(e.positionData.takeProfit),t(4),o(s(117,112,"PROVIDERS_PROFILE.Trading Result")),t(3),o(s(120,114,"PROVIDERS_PROFILE.Position's trading result")),t(6),o(s(126,116,"PROVIDERS_PROFILE.Trading Profit")),t(4),o(E(130,118,e.positionData.totalProfit,"USD","symbol")),t(4),o(s(134,122,"PROVIDERS_PROFILE.MetaTrader commission")),t(4),o(E(138,124,e.positionData.commission,"USD","symbol")),t(4),o(s(142,128,"PROVIDERS_PROFILE.Swaps")),t(4),o(E(146,130,e.positionData.swaps,"USD","symbol")),t(4),o(s(150,134,"PROVIDERS_PROFILE.Taxes")),t(4),o(E(154,136,e.positionData.taxes,"USD","symbol")),t(4),o(s(158,140,"PROVIDERS_PROFILE.Profit")),t(4),o(E(162,142,e.positionData.profit,"USD","symbol")),t(2),f("ngIf",e.isProvider),t(4),o(s(168,146,"PROVIDERS_PROFILE.Personal Info")),t(3),o(s(171,148,"PROVIDERS_PROFILE.Update your personal details here")),t(8),o(s(179,150,"PROVIDERS_PROFILE.Information")),t(5),o(s(184,152,"COMMON.State")),t(4),o(e.positionData==null?null:e.positionData.state),t(4),o(s(192,154,"COMMON.Status")),t(4),o(e.positionData==null?null:e.positionData.status),t(4),o(s(200,156,"PROVIDERS_PROFILE.Trading Account")),t(7),o(s(207,158,"PROVIDERS_PROFILE.MT name")),t(4),o(e.tradeAccountData==null?null:e.tradeAccountData.tradingAccName),t(4),o(s(215,160,"PROVIDERS_PROFILE.MT login")),t(4),o(e.tradeAccountData==null?null:e.tradeAccountData.tradingAccountNo),t(4),o(s(223,162,"PROVIDERS_PROFILE.State")),t(4),P("\u25CF ",e.tradeAccountData==null?null:e.tradeAccountData.state,""),t(4),S(e.isProvider?230:231),t(2),f("ngIf",e.isProvider),t(),f("ngIf",e.isFollower),t(4),o(s(238,164,"PROVIDERS_PROFILE.State")),t(4),o(e.isProvider?e.providersData==null?null:e.providersData.state:e.subscriptionData==null?null:e.subscriptionData.state),t(4),o(s(246,166,"PROVIDERS_PROFILE.Updated (UTC)")),t(4),o(M(250,168,e.positionData==null?null:e.positionData.updatedUtc,"MMMM d, y 'at' hh:mm:ss a")),t(4),f("ngForOf",e.tabArrConfig)}}function Je(r,m){r&1&&(i(0,"div",46),I(1,"img",47),n())}var Dt=(()=>{class r{currencyPipe;_webService;route;_router;currentSelectedTabIndx=0;tabArrConfig=[];providerId;positionId;subscriptionId;subscriptionData;accountId;showPageLoader=!1;isProvider=!1;isFollower=!1;constantVariable=new ie;beDealsDialog=y(T);tradingDialog=y(T);errorComponent;positionData={};providersData={};tradeAccountData={};positionStatsData={};constructor(e,p,d,c){this.currencyPipe=e,this._webService=p,this.route=d,this._router=c,this.isProvider=this._webService.isProviderAccount,this.isFollower=this._webService.isSubscriptionAccount,this.route.paramMap.subscribe(u=>{this.providerId=u.get("providerId"),this.positionId=u.get("positionId"),this.subscriptionId=u.get("subscriptionId"),this.getAllPositionPageData()}),this._webService.subscribeOnWebDataChange("PositionsStandAloneComponent",u=>{this.recieveChildrenEmitter(u)})}getAllPositionPageData(){return A(this,null,function*(){this.showPageLoader=!0;let e=yield this.getPositionData();if(this.isProvider){let d=yield this.getPositionStatsData()}let p=yield this.getTradingAccountData();if(this.isProvider){let d=yield this.getProviderData()}else{let d=yield this.getSubscriptionData()}this.setUpTabsConfig(),this.getGridData(this.tabArrConfig[0]),this.showPageLoader=!1})}getPositionData(){return new Promise(e=>{let p={positionId:this.positionId},d;this.isProvider?d=this._webService.getSinglePosotionData(p):d=this._webService.getSingleSubscriptionPositionData(p),d.subscribe({next:c=>{this.positionData=c,this.providerId=this.positionData.providerId,this.accountId=this.positionData.accountId,e()},error:c=>{this.showErrorWarnMessage(c?.error?.errorMessage),e()}})})}getTradingAccountData(){return new Promise(e=>{let p={accountId:this.accountId};this._webService.getSingleTradingAccountData(p).subscribe({next:d=>{this.tradeAccountData=new Ee(d),e()},error:d=>{this.showErrorWarnMessage(d?.error?.errorMessage),e()}})})}getProviderData(){return new Promise(e=>{let p={providerId:this.providerId};this._webService.getSingleProviderData(p).subscribe({next:d=>{this.providersData=d,e()},error:d=>{this.showErrorWarnMessage(d?.error?.errorMessage),e()}})})}getSubscriptionData(){return new Promise(e=>{let p={subscriptionId:this.subscriptionId};this._webService.getFollowerDataById(p).subscribe({next:d=>{this.subscriptionData=d,e()},error:d=>{this.showErrorWarnMessage(d?.error?.errorMessage),e()}})})}getPositionStatsData(){return new Promise(e=>{let p={providerId:this.providerId,positionId:this.positionId};this._webService.getStatsData(p).subscribe({next:d=>{this.positionStatsData=d,e()},error:d=>{this.showErrorWarnMessage(d?.error?.errorMessage),e()}})})}setUpTabsConfig(){this.tabArrConfig=this.getProviderSubscriptionTabsConfig()}getProviderSubscriptionTabsConfig(){let e=[];return e.push(this.getDealsTabConfigObj()),e}getDealsTabConfigObj(){let e=this.constantVariable?.http_Api_Url[this.isProvider?"provider_profile":"subscription_profile"].deals.replace(this.isProvider?":providerId":":subscriptionId",this.isProvider?this.providerId:this.subscriptionId);return{label:"PROVIDERS_PROFILE.Deals",filters:{show:!1,type:{entry:""},clear:function(){this.type={entry:""}},positionData:this.positionData,getApiParams:function(){let p={},d=()=>{let c="";return this.type.entry&&(c+=`entry eq '${this.type.entry}' and `),c+=`position eq ${this.positionData.position} and `,c};return p.$count=!0,d.apply(this)&&(p.$filter=d.apply(this).slice(0,-4)),p}},grid:this.getCommonGridDetails("deals","There are no deals",Ce,e)}}getCommonGridDetails(e,p,d,c,u){let D=this.getGridColDefs(e);return{apiUrl:c,colDef:D,config:this.getCommonGridConfig(D,p),data:[],showLoader:!1,uiModel:d,uiModelSecondParamData:u}}getCommonGridConfig(e,p){return{maxHeight:"400px",noDataWarnMessage:p,gridOptions:{},agGridTheme:"ag-theme-alpine",pageSizeDropdownArr:[5,10,15],initialSelectedPageSize:5,columnDefination:e,enablePagination:!0,headerNameLangArr:e.map(c=>c.headerName),rowModelType:"clientSide",rowHeight:void 0}}getGridColDefs(e){if(e=="deals")return this.isProvider?[{field:"dealKey",headerName:"PROVIDERS_PROFILE.Deal",resizable:!1,cellRenderer:O,colId:"dealsTitleCell"},{field:"entry",headerName:"PROVIDERS_PROFILE.Entry",sortable:!1,resizable:!1,cellRenderer:O,colId:"tagCell"},{field:"symbol",headerName:"PROVIDERS_PROFILE.Symbol",resizable:!1},{field:"volume",headerName:"PROVIDERS_PROFILE.Volume",resizable:!1,cellRenderer:O,colId:"dealsVolumeCell"},{field:"price",headerName:"PROVIDERS_PROFILE.Price",resizable:!1},{field:"time",headerName:"PROVIDERS_PROFILE.Time",sort:"desc",resizable:!1},{field:"actions",headerName:"",sortable:!1,cellRenderer:V,showPopupArraow:!0,colId:"dealsPopup"}]:[{field:"dealKey",headerName:"PROVIDERS_PROFILE.Deal",resizable:!1,cellRenderer:O,colId:"dealsSubTitleCell"},{field:"status",headerName:"COMMON.Status",sortable:!1,resizable:!1,cellRenderer:O,colId:"tagCell"},{field:"entry",headerName:"PROVIDERS_PROFILE.Entry",sortable:!1,resizable:!1,cellRenderer:O,colId:"tagCell"},{field:"price",headerName:"PROVIDERS_PROFILE.Price",resizable:!1},{field:"actions",headerName:"",sortable:!1,cellRenderer:V,showPopupArraow:!0,colId:"dealsPopup"}]}onTabChange(e){this.currentSelectedTabIndx=e.index,this.getGridData(this.tabArrConfig[this.currentSelectedTabIndx])}getGridData(e){let p=e.grid;p.showLoader=!0;let d=e.filters.getApiParams();this._webService.getCommonGridData(p.apiUrl,d).subscribe({next:c=>{let u=[];c.items.forEach(D=>u.push(new p.uiModel(D,p.uiModelSecondParamData))),p.data=u,p.showLoader=!1},error:c=>{this.showErrorWarnMessage(c?.error?.errorMessage),p.showLoader=!1}})}applyFilters(e){e.filters.show?(e.filters.show=!1,this.clearFilters(e)):e.filters.show=!0}clearFilters(e){e.filters.clear(),this.getGridData(e)}refreshDataList(e){this.getGridData(e)}showErrorWarnMessage(e){let p=this.errorComponent?.config;p.message=e||p.message,this.errorComponent?.openErrorSnackbar()}recieveChildrenEmitter(e){e.action=="open_deals_popup"&&this.openDealsPopup(e.data)}openDealsPopup(e){this.beDealsDialog.open(L,{panelClass:"common-dialog",data:this.isProvider?this.prepareDealsData(e):this.prepareSubscriptionDealsData(e)}),this.beDealsDialog.afterAllClosed.subscribe(p=>{})}prepareDealsData(e){return{mainTitle:"Info",secondryTitle:"Information about the provider's deal",labelDetails:[{title:"PROVIDERS_PROFILE.Deal",value:e.dealKey},{title:"PROVIDERS_PROFILE.Position",value:e.position},{title:"PROVIDERS_PROFILE.State",value:e.state},{title:"PROVIDERS_PROFILE.Symbol",value:e.symbol},{title:"PROVIDERS_PROFILE.Entry",value:e.entry},{title:"PROVIDERS_PROFILE.Entry type",value:e.entryType},{title:"PROVIDERS_PROFILE.Direction",value:e.direction},{title:"PROVIDERS_PROFILE.Volume",value:e.volume},{title:"PROVIDERS_PROFILE.Price",value:e.price},{title:"PROVIDERS_PROFILE.Time",value:e.time}]}}prepareSubscriptionDealsData(e){let p={mainTitle:"PROVIDERS_PROFILE.Deal",secondryTitle:"PROVIDERS_PROFILE.Deal's details",labelDetails:[{title:"PROVIDERS_PROFILE.Deal",value:e.dealKey},{title:"PROVIDERS_PROFILE.Source",value:e.copyDealKey},{title:"PROVIDERS_PROFILE.Position",value:`${e.position} #${e.positionId}`,type:"postionRedirection",data:e},{title:"ACCOUNTS.Type",value:e.type},{title:"PROVIDERS_PROFILE.State",value:e.state},{title:"COMMON.Status",value:e.status},{title:"PROVIDERS_PROFILE.Symbol",value:e.symbol},{title:"PROVIDERS_PROFILE.Entry",value:e.entry},{title:"PROVIDERS_PROFILE.Entry type",value:e.entryType},{title:"PROVIDERS_PROFILE.Direction",value:e.direction},{title:"PROVIDERS_PROFILE.Volume",value:e.volume},{title:"PROVIDERS_PROFILE.Price",value:e.price},{title:"PROVIDERS_PROFILE.Time",value:e.time},{title:"PROVIDERS_PROFILE.Profit",value:this.currencyPipe.transform(e.profit,e.currency,"symbol")},{title:"PROVIDERS_PROFILE.Error",value:e.error},{title:"PROVIDERS_PROFILE.Attempts",value:e.attempts}]};return e.error||p.labelDetails.splice(p.labelDetails.length-2,1),p}openBeTradingAccountPopup(){this.tradingDialog.open(L,{panelClass:"common-dialog",data:this.prepareTradingAccountData()}),this.tradingDialog.afterAllClosed.subscribe(e=>{})}prepareTradingAccountData(){let e=this.tradeAccountData;return{mainTitle:"HOME.TradingAccInfo",secondryTitle:"ACCOUNTS.InfoMetaTradeAccount",labelDetails:[{title:"COMMON.Id",value:e.clientId},{title:"COMMON.State",value:e.state,type:"tag"},{title:"ACCOUNTS.Connected",value:e.connectTime},{title:"PROVIDERS_PROFILE.MT login",value:e.tradingAccountNo},{title:"PROVIDERS_PROFILE.MT name",value:e.tradingAccName},{title:"ACCOUNTS.TradeGroupType",value:e.tradeGroupType,type:"tag"},{title:"ACCOUNTS.AvailInMetaTrade",value:e.avialableInMetaTrade,type:"tag"},{title:"ACCOUNTS.TradeType",value:e.tradeType,type:"tag"},{title:"PROVIDERS_PROFILE.Currency",value:e.currency},{title:"ACCOUNTS.Balance",value:e.balance},{title:"ACCOUNTS.Credit",value:e.credit},{title:"ACCOUNTS.Equity",value:e.equity},{title:"ACCOUNTS.FloatProfit",value:e.floatingPoint}]}}ngOnDestroy(){this._webService.unSubscribeOnWebDataChange("PositionsStandAloneComponent")}static \u0275fac=function(p){return new(p||r)(C(b),C(ne),C(Y),C(Z))};static \u0275cmp=B({type:r,selectors:[["app-position"]],viewQuery:function(p,d){if(p&1&&k(fe,5),p&2){let c;U(c=j())&&(d.errorComponent=c.first)}},standalone:!0,features:[q([b]),H],decls:3,vars:2,consts:[["appearance","outlined",1,"section-card"],["class","section-card-content",4,"ngIf"],["class","full-view-port-height d-flex justify-center align-center",4,"ngIf"],[1,"section-card-content"],[1,"home-card"],[1,"header","d-flex","justify-space-between","align-center"],[1,"header-title"],[1,"info-section","d-flex","justify-space-between"],[1,"info-section-left"],[1,"d-flex","justify-space-between","w-100"],[1,"info-section-left-items"],[1,"info-section-left-items","info-section-left-items-card"],["appearance","outlined"],[1,"d-flex","justify-space-between","align-center"],["class","d-flex justify-space-between align-center",4,"ngIf"],["class","d-flex justify-space-between w-100",4,"ngIf"],[1,"info-section-right"],[1,"info-section-right-header"],[1,"info-section-right-card"],[1,"items"],[1,"d-flex","justify-center","items-main"],[1,"items-left"],[1,"items-right"],[1,"status-badge"],["href","javascript:void(0)",1,"default-link",3,"click"],["src","../../../../assets/icons/arrow-single.png"],["class","d-flex justify-center items-main",4,"ngIf"],[1,"metrics-table"],["mat-stretch-tabs","false","mat-align-tabs","start",1,"providerProfile-tabGroup",3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"default-link",3,"routerLink"],[3,"label"],["matTabContent",""],[1,"header-buttons","d-flex","justify-space-between","pb-20","g-20"],[1,"d-flex","g-20","justify-center","align-center"],[1,"secondary-btn",3,"click"],["src","../../../../assets/icons/filterIcon.svg"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"d-flex","g-20","common-dropdown","align-center","flex-wrap","justify-end"],[3,"gridConfig","gridData","showGridLoader"],["width","20","src","../../../../assets/icons/clear-icon.svg"],[4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"value"],["src","../../../../assets/icons/searchIcon.svg"],["src","../../../../assets/icons/rotateIcon.svg"],[1,"full-view-port-height","d-flex","justify-center","align-center"],["src","../../../../assets/logo/ICM Logo Default 1.png"]],template:function(p,d){p&1&&(i(0,"mat-card",0),g(1,Qe,254,171,"mat-card-content",1)(2,Je,2,0,"div",2),n()),p&2&&(t(),f("ngIf",!d.showPageLoader),t(),f("ngIf",d.showPageLoader))},dependencies:[X,K,Q,b,J,se,Re,te,ee,_e,ce,me,he,xe,Oe,Se,de,pe,ve,Pe,ge,Ie,ae,ue,le,oe,re],styles:[".stats-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.stats-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:20px}.stats-subline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .positive[_ngcontent-%COMP%]{color:#027a48}.stats-subline[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .negative[_ngcontent-%COMP%]{color:#b42318}.info-section[_ngcontent-%COMP%]{padding-block:50px}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;gap:20px}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items[_ngcontent-%COMP%]{width:100%;padding:15px;height:fit-content}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;margin:unset}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#667085}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:18px;margin:unset}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{font-size:40px;padding-top:5px;color:#d0d5dd;font-weight:100}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items-card[_ngcontent-%COMP%]{border:2px solid #EAECF0;border-radius:10px;height:fit-content}.info-section[_ngcontent-%COMP%]   .info-section-left[_ngcontent-%COMP%]   .info-section-left-items-card[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{border:none!important}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]{width:25%}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px;margin:unset}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#667085}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:18px;margin:unset}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top:1px solid #EAECF0;margin-block:20px}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:15px}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{padding-block:5px}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .items-main[_ngcontent-%COMP%]{width:100%;padding-block:10px}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .items-main[_ngcontent-%COMP%]   .items-left[_ngcontent-%COMP%]{padding:8px 10px;width:50%;border:1px solid #D0D5DD;border-top-left-radius:6px;border-bottom-left-radius:6px;color:#667085;font-weight:400}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .items-main[_ngcontent-%COMP%]   .items-right[_ngcontent-%COMP%]{padding:8px 20px;width:100%;border:1px solid #D0D5DD;border-top-right-radius:6px;border-bottom-right-radius:6px}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   .items-main[_ngcontent-%COMP%]   .items-right[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#ecfdf3;width:fit-content;padding:0 10px;border-radius:6px;color:#027a48}.info-section[_ngcontent-%COMP%]   .info-section-right[_ngcontent-%COMP%]   .info-section-right-card[_ngcontent-%COMP%]   .mat-mdc-card[_ngcontent-%COMP%]{border:none!important}  .providerProfile-tabGroup .mdc-tab__text-label{font-size:20px!important;font-weight:400;color:#667085!important}  .providerProfile-tabGroup .mdc-tab{padding:0 50px!important}  .common-dropdown .mdc-text-field{background-color:var(--primaryWhite)!important;border:1px solid var(--border-color)!important;border-bottom:0px!important;border-radius:8px!important;width:150px}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .mat-mdc-form-field-subscript-wrapper{display:none}"]})}return r})();export{Dt as PositionsStandAloneComponent};
