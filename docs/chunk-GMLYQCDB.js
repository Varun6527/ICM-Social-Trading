import{a as G,b as Q}from"./chunk-HXS4ZZZM.js";import{a as U,c as W}from"./chunk-KKB3U7AD.js";import{a as N}from"./chunk-D2HZNMZZ.js";import{Oa as S}from"./chunk-GPXXUB3O.js";import{$b as D,Ab as x,Da as v,Ha as n,Hc as A,Jc as j,Ka as M,Kc as L,Lc as k,Qa as m,Qb as O,R as y,Ra as p,Sa as u,Sb as T,Ta as l,Ua as d,Zb as B,_a as g,eb as I,fb as P,gb as F,lb as a,mb as C,nb as s,oa as r,pa as w,ub as E,wb as H,xb as b,yb as c,zb as f}from"./chunk-VFCAWHKN.js";var V=t=>({"justify-center":t}),q=(t,o)=>({"green-color":t,"red-color":o});function R(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Monthly Fees")," "))}function z(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Monthly Trading")," "))}function J(t,o){if(t&1&&u(0,"apx-chart",7),t&2){let e=g(2);n("series",e.chartOptions.series)("chart",e.chartOptions.chart)("xaxis",e.chartOptions.xaxis)("stroke",e.chartOptions.stroke)("tooltip",e.chartOptions.tooltip)("yaxis",e.chartOptions.yaxis)("grid",e.chartOptions.grid)("dataLabels",e.chartOptions.dataLabels)("fill",e.chartOptions.fill)("colors",e.chartOptions.colors)("labels",e.chartOptions.labels)("responsive",e.chartOptions.responsive)("legend",e.chartOptions.legend)}}function K(t,o){t&1&&(m(0,"h6"),a(1),c(2,"translate"),p()),t&2&&(r(),C(f(2,1,"HOME.NoTradingHistory")))}function X(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Followers")," "))}function Y(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Trading profit")," "))}function Z(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.providerMetric==null?null:e.providerMetric.followers," ")}}function $(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.followerMetric==null?null:e.followerMetric.tradeProfit," ")}}function ee(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"COMMON.Active")," "))}function te(t,o){if(t&1&&(l(0),a(1),c(2,"date"),d()),t&2){let e=g(2);r(),s(" ",x(2,1,e.currentDate,"MMMM"),"")}}function re(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Followers Growth")," "))}function ie(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Copied Position")," "))}function ne(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.providerMetric==null?null:e.providerMetric.followerGrowth," ")}}function oe(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.followerMetric==null?null:e.followerMetric.copiedPos," ")}}function ae(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Closed Profit (own)")," "))}function le(t,o){t&1&&(l(0),a(1),c(2,"translate"),d()),t&2&&(r(),s(" ",f(2,1,"HOME.Paid Fees")," "))}function de(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.providerMetric==null?null:e.providerMetric.closedProfit," ")}}function se(t,o){if(t&1&&(l(0),a(1),d()),t&2){let e=g(2);r(),s(" ",e.followerMetric==null?null:e.followerMetric.paidFees," ")}}function ce(t,o){if(t&1&&(m(0,"div",1)(1,"div",2)(2,"h6"),v(3,R,3,3,"ng-container",3)(4,z,3,3,"ng-container",3),p(),v(5,J,1,13,"apx-chart",4)(6,K,3,3,"h6",3),p(),m(7,"div",5)(8,"h6"),v(9,X,3,3,"ng-container",3)(10,Y,3,3,"ng-container",3),p(),m(11,"h3"),v(12,Z,2,1,"ng-container",3)(13,$,2,1,"ng-container",3),p(),m(14,"p"),v(15,ee,3,3,"ng-container",3)(16,te,3,4,"ng-container",3),p()(),m(17,"div",5)(18,"h6"),v(19,re,3,3,"ng-container",3)(20,ie,3,3,"ng-container",3),p(),m(21,"h3",6),v(22,ne,2,1,"ng-container",3)(23,oe,2,1,"ng-container",3),p(),m(24,"p"),a(25),c(26,"date"),p()(),m(27,"div",5)(28,"h6"),v(29,ae,3,3,"ng-container",3)(30,le,3,3,"ng-container",3),p(),m(31,"h3"),v(32,de,2,1,"ng-container",3)(33,se,2,1,"ng-container",3),p(),m(34,"p"),a(35),c(36,"date"),p()()()),t&2){let e=g();r(),n("ngClass",H(34,V,(e.providerMetric==null?null:e.providerMetric.monthlyFeesArr.length)===0||(e.followerMetric==null?null:e.followerMetric.monthlyTradeArr.length)===0)),r(2),n("ngIf",e.role.hasProvider&&(e.providerMetric==null?null:e.providerMetric.monthlyFeesArr.length)>0),r(),n("ngIf",e.role.hasFollower&&(e.followerMetric==null?null:e.followerMetric.monthlyTradeArr.length)>0),r(),n("ngIf",e.chartOptions),r(),n("ngIf",!e.chartOptions),r(3),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(),M(e.followerMetric==null?null:e.followerMetric.tradeProfitClass),r(),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(2),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(3),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(),n("ngClass",b(36,q,(e.providerMetric==null?null:e.providerMetric.followerGrowth)>0,(e.providerMetric==null?null:e.providerMetric.followerGrowth)<0)),r(),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(2),C(x(26,28,e.currentDate,"MMMM")),r(4),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(),M(e.providerMetric==null?null:e.providerMetric.closedProfitClass),r(),n("ngIf",e.role.hasProvider),r(),n("ngIf",e.role.hasFollower),r(2),C(x(36,31,e.currentDate,"MMMM"))}}var ue=(()=>{class t{translate;_webService;role={};currentDate=new Date;providerMetric;followerMetric;chartOptions;IConstant=new A;getDataById=!1;id=!1;errorComponent;constructor(e,i){this.translate=e,this._webService=i,this.role.hasProvider=this._webService.isProviderAccount,this.role.hasFollower=this._webService.isSubscriptionAccount}ngOnInit(){this.getHeaderCardsData()}getHeaderCardsData(){this.role.hasProvider?this.getProviderMetrics():this.role.hasFollower&&this.getFollowersMetrics()}getProviderMetrics(){let e;this.getDataById?e=this._webService.getProviderMetricById(this.id):e=this._webService.getProviderMetric(),e.subscribe({next:i=>{this.providerMetric=new U(i),this.setChartData("provider")},error:i=>{this.showErrorWarnMessage(i?.error?.errorMessage)}})}getFollowersMetrics(){let e;this.getDataById?e=this._webService.getFollowerMetricById(this.id):e=this._webService.getFollowerMetric(),e.subscribe({next:i=>{this.followerMetric=new W(i),this.setChartData("follower")},error:i=>{this.showErrorWarnMessage(i?.error?.errorMessage)}})}showErrorWarnMessage(e){let i=this.errorComponent?.config;i.message=e||i.message,this.errorComponent?.openErrorSnackbar()}setChartData(e){if(e=="provider"){if(this.providerMetric.monthlyFeesArr?.length==0)return;let i=this.providerMetric.monthlyFeesArr.map(_=>Number(_.feesValue.replace(/[^0-9.-]+/g,""))),h=this.providerMetric.monthlyFeesArr.map(_=>new Date(_.month).toLocaleString("en-US",{month:"short"}));this.chartOptions=this.IConstant.getHomePageChartConfig(i,h,this.providerMetric.currencyType,"Fees")}else if(e=="follower"){if(this.followerMetric.monthlyTradeArr.length==0)return;let i=this.followerMetric.monthlyTradeArr.map(_=>Number(_.monthTradeProfit.replace(/[^0-9.-]+/g,""))),h=this.followerMetric.monthlyTradeArr.map(_=>new Date(_.month).toLocaleString("en-US",{month:"short"}));this.chartOptions=this.IConstant.getHomePageChartConfig(i,h,this.followerMetric.currencyType,"Profit")}}static \u0275fac=function(i){return new(i||t)(w(j),w(N))};static \u0275cmp=y({type:t,selectors:[["provider-follower-header-cards"]],viewQuery:function(i,h){if(i&1&&I(S,5),i&2){let _;P(_=F())&&(h.errorComponent=_.first)}},inputs:{getDataById:"getDataById",id:"id"},standalone:!0,features:[E],decls:2,vars:1,consts:[["class","stats d-flex justify-space-between g-20",4,"ngIf"],[1,"stats","d-flex","justify-space-between","g-20"],[1,"stats-card",3,"ngClass"],[4,"ngIf"],[3,"series","chart","xaxis","stroke","tooltip","yaxis","grid","dataLabels","fill","colors","labels","responsive","legend",4,"ngIf"],[1,"stats-card"],[3,"ngClass"],[3,"series","chart","xaxis","stroke","tooltip","yaxis","grid","dataLabels","fill","colors","labels","responsive","legend"]],template:function(i,h){i&1&&(v(0,ce,37,39,"div",0),u(1,"show-error-message")),i&2&&n("ngIf",(h.role.hasProvider||h.role.hasFollower)&&(h.providerMetric||h.followerMetric))},dependencies:[D,O,T,B,k,L,S,Q,G],styles:[".green-color[_ngcontent-%COMP%]{color:var(--primary-positive-color)}.red-color[_ngcontent-%COMP%]{color:var(--error-message--container-color)}"]})}return t})();export{ue as a};
