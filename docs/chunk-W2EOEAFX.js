import{a as W}from"./chunk-ELFW3MCS.js";import{b as K,c as X}from"./chunk-BUFGAGPR.js";import{a as G,e as Q,f as U,g as $,i as z,j as H,o as J,q as Y,r as Z}from"./chunk-BBDCSVIU.js";import{a as D}from"./chunk-D2HZNMZZ.js";import{Aa as N,Ba as T,Fa as R,Ha as L,Ia as j,La as q,Na as V,O,Oa as b,va as k,xa as v}from"./chunk-GPXXUB3O.js";import{$b as y,Da as g,Ha as s,Hb as w,Hc as x,Kc as A,Lc as B,Qa as a,R as I,Ra as n,Rb as P,Sa as h,Sb as E,Ya as C,eb as S,fb as _,gb as M,lb as l,mb as d,oa as i,pa as f,ub as F,yb as m,zb as p}from"./chunk-VFCAWHKN.js";function ee(t,c){if(t&1&&(a(0,"mat-option",12),l(1),n()),t&2){let o=c.$implicit;s("value",o.accountId),i(),d(o.tradingIdAndName)}}function re(t,c){t&1&&(a(0,"p",13),l(1),m(2,"translate"),n()),t&2&&(i(),d(p(2,1,"COMMON.SelectAvailTradeAccountForNewProvider")))}function te(t,c){t&1&&(a(0,"mat-error",13),l(1),m(2,"translate"),n()),t&2&&(i(),d(p(2,1,"login.FieldRequired")))}function ie(t,c){t&1&&(a(0,"p",13),l(1),m(2,"translate"),n()),t&2&&(i(),d(p(2,1,"PROVIDERS_PROFILE.Provider's name to be displayed for followers")))}function oe(t,c){t&1&&(a(0,"mat-error",13),l(1),m(2,"translate"),n()),t&2&&(i(),d(p(2,1,"login.FieldRequired")))}function ne(t,c){t&1&&(a(0,"mat-error",13),l(1),m(2,"translate"),n()),t&2&&(i(),d(p(2,1,"COMMON.Warn6CharMsg")))}var we=(()=>{class t{dialogRef;fb;_webService;cdr;createproviderForm;tradingIdArr;showError=!1;showLoader=!1;errorComponent;IConstant;constructor(o,r,e,u){this.dialogRef=o,this.fb=r,this._webService=e,this.cdr=u,this.createproviderForm=this.fb.group({accountId:["",[v.required]],nickname:["",[v.required,v.minLength(6)]]}),this.IConstant=new x,this.getTradingAccountsDetails()}get getControl(){return this.createproviderForm.controls}getTradingAccountsDetails(){let o={scope:"Active"};this._webService.getTradingAccountData(o).subscribe({next:r=>{this.tradingIdArr=r.items.map(e=>({tradingIdAndName:`${e.externalAccount} - ${e.externalName}`,accountId:e.id}))},error:r=>{this.showErrorWarnMessage(r?.error?.errorMessage)}})}closeCreateProviderForm(){this.dialogRef.close()}showErrorWarnMessage(o){let r=this.errorComponent?.config;r.message=o||r.message,this.errorComponent?.openErrorSnackbar()}createProviderUser(){if(this.createproviderForm.invalid){this.showError=!0;return}this.showLoader=!0,this.showError=!1;let o={accountId:this.getControl.accountId.value,nickname:this.getControl.nickname.value};this._webService.createProvider(o).subscribe({next:r=>{this.showSuccessPopupMsg("Provider has been added"),this._webService.emitOnWebDataChange({action:"provider_created",data:r}),this.showLoader=!1},error:r=>{this.showLoader=!1,this.showErrorWarnMessage(this.IConstant.errorMessageObj[r?.error?.errorCode]),this.cdr.detectChanges()}})}showSuccessPopupMsg(o){let r=this.errorComponent?.config;r.customStyle="default-success-style",r.message=o||r.message,this.errorComponent?.openErrorSnackbar()}static \u0275fac=function(r){return new(r||t)(f(G),f(q),f(D),f(w))};static \u0275cmp=I({type:t,selectors:[["beProvider-dialog"]],viewQuery:function(r,e){if(r&1&&S(b,5),r&2){let u;_(u=M())&&(e.errorComponent=u.first)}},standalone:!0,features:[F],decls:32,vars:26,consts:[["mat-dialog-title","",1,"text-center"],[1,"text-center"],[3,"formGroup"],[1,"mat-typography"],[1,"common-field"],["formControlName","accountId"],[3,"value",4,"ngFor","ngForOf"],["class","pb-10",4,"ngIf"],["type","text","matInput","","placeholder","Provider 1","formControlName","nickname"],[1,"d-flex","justify-center","g-20"],[1,"secondary-btn",3,"click"],["type","submit",1,"primary-btn",3,"click","IcmLoadingOverlay"],[3,"value"],[1,"pb-10"]],template:function(r,e){r&1&&(a(0,"h2",0),l(1),m(2,"translate"),n(),a(3,"p",1),l(4),m(5,"translate"),n(),a(6,"form",2)(7,"mat-dialog-content",3)(8,"mat-form-field",4)(9,"mat-label"),l(10),m(11,"translate"),n(),a(12,"mat-select",5),g(13,ee,2,2,"mat-option",6),n()(),g(14,re,3,3,"p",7)(15,te,3,3,"mat-error",7),a(16,"mat-form-field",4)(17,"mat-label"),l(18),m(19,"translate"),n(),h(20,"input",8),n(),g(21,ie,3,3,"p",7)(22,oe,3,3,"mat-error",7)(23,ne,3,3,"mat-error",7),n(),a(24,"div",9)(25,"button",10),C("click",function(){return e.closeCreateProviderForm()}),l(26),m(27,"translate"),n(),a(28,"button",11),C("click",function(){return e.createProviderUser()}),l(29),m(30,"translate"),n()()(),h(31,"show-error-message")),r&2&&(i(),d(p(2,14,"HOME.New Provider")),i(3),d(p(5,16,"COMMON.CreateNewProvider")),i(2),s("formGroup",e.createproviderForm),i(4),d(p(11,18,"SUBSCRIPTION.Trading account")),i(3),s("ngForOf",e.tradingIdArr),i(),s("ngIf",!e.showError||!(e.createproviderForm.controls.accountId.errors!=null&&e.createproviderForm.controls.accountId.errors.required)),i(),s("ngIf",e.showError&&(e.createproviderForm.controls.accountId.errors==null?null:e.createproviderForm.controls.accountId.errors.required)),i(3),d(p(19,20,"OFFERS.Nickname")),i(3),s("ngIf",!e.showError||!(e.createproviderForm.controls.nickname.errors!=null&&e.createproviderForm.controls.nickname.errors.required)&&!(e.createproviderForm.controls.nickname.errors!=null&&e.createproviderForm.controls.nickname.errors.minlength)),i(),s("ngIf",e.showError&&(e.createproviderForm.controls.nickname.errors==null?null:e.createproviderForm.controls.nickname.errors.required)),i(),s("ngIf",e.showError&&(e.createproviderForm.controls.nickname.errors==null?null:e.createproviderForm.controls.nickname.errors.minlength)),i(3),d(p(27,22,"COMMON.Cancel")),i(2),s("IcmLoadingOverlay",e.showLoader),i(),d(p(30,24,"COMMON.Create")))},dependencies:[$,Q,U,X,K,J,z,H,Z,Y,O,y,P,E,V,R,k,N,T,L,j,b,B,A,W],styles:[".beProvider-dialog{width:600px!important;border-radius:10px!important}  .beProvider-dialog .mat-mdc-dialog-title{margin:unset!important;padding-bottom:10px!important}  .beProvider-dialog .mat-mdc-dialog-surface{border-radius:10px!important;background:#fff!important;padding:20px!important}  .beProvider-dialog .common-field{width:100%!important}  .beProvider-dialog .common-field .mdc-text-field{background-color:#fff;border:1px solid;border-bottom:0px}  .beProvider-dialog .common-field .mdc-text-field textarea{resize:none}  .beProvider-dialog .common-field .mdc-text-field .mat-mdc-form-field-text-suffix{font-size:20px}"],changeDetection:0})}return t})();export{we as a};
