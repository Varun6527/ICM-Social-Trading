import{a as ne}from"./chunk-W2EOEAFX.js";import{a as le}from"./chunk-KKBRAPKR.js";import"./chunk-DRFXQGFU.js";import{a as me}from"./chunk-GMLYQCDB.js";import"./chunk-HXS4ZZZM.js";import"./chunk-ELFW3MCS.js";import{a as de}from"./chunk-XY6TIIOF.js";import{a as se}from"./chunk-AGXGLGFY.js";import{a as b}from"./chunk-ZMEXDH5L.js";import"./chunk-BUFGAGPR.js";import{d as re,f as oe,h as ae}from"./chunk-KKB3U7AD.js";import{c as _,i as Z,o as ee,q as te,r as ie,u as x,v as ce}from"./chunk-BBDCSVIU.js";import{a as V}from"./chunk-D2HZNMZZ.js";import{Aa as K,Ea as X,Ma as Y,O as k,Oa as D,T as j,U as q,V as Q}from"./chunk-GPXXUB3O.js";import{$b as G,Bc as z,Da as A,Ha as m,Kc as $,Lc as J,O as w,Qa as a,Qb as U,R as E,Ra as n,Sa as p,Sb as B,Ta as T,Ua as M,Va as P,W as g,X as u,Ya as v,_a as f,eb as y,fb as N,gb as I,lb as l,mb as c,nb as O,oa as i,pa as S,qb as F,rb as H,sb as R,ub as L,wb as W,yb as d,zb as s}from"./chunk-VFCAWHKN.js";import"./chunk-XTLRYQGA.js";var pe=o=>({"d-flex justify-space-between pb-20":o});function fe(o,C){o&1&&(T(0),a(1,"h5"),l(2),d(3,"translate"),n(),a(4,"p"),l(5),d(6,"translate"),n(),M()),o&2&&(i(2),c(s(3,2,"HOME.Provider Metrics")),i(3),c(s(6,4,"HOME.Metrics of individual providers")))}function he(o,C){o&1&&(T(0),a(1,"h5"),l(2),d(3,"translate"),n(),a(4,"p"),l(5),d(6,"translate"),n(),M()),o&2&&(i(2),c(s(3,2,"HOME.Follower Metrics")),i(3),c(s(6,4,"HOME.Metrics of individual Follower")))}function ge(o,C){o&1&&(a(0,"div")(1,"h5"),l(2),d(3,"translate"),n(),a(4,"p"),l(5),d(6,"translate"),n()()),o&2&&(i(2),c(s(3,2,"ACCOUNTS.Accounts")),i(3),c(s(6,4,"ACCOUNTS.AccountsAddFromMetaTrade")))}function ue(o,C){if(o&1){let e=P();a(0,"div",15)(1,"mat-form-field")(2,"mat-label"),l(3),d(4,"translate"),n(),a(5,"mat-select",16),R("ngModelChange",function(r){g(e);let h=f(2);return H(h.selectAccountStatus,r)||(h.selectAccountStatus=r),u(r)}),v("selectionChange",function(){g(e);let r=f(2);return u(r.refreshTradeAccountList())}),a(6,"mat-option",17),l(7),d(8,"translate"),n(),a(9,"mat-option",17),l(10),d(11,"translate"),n()()(),a(12,"button",18),v("click",function(){g(e);let r=f(2);return u(r.refreshTradeAccountList())}),p(13,"img",19),l(14," Refresh "),n()()}if(o&2){let e=f(2);i(3),c(s(4,6,"PROVIDERS_PROFILE.Scope")),i(2),F("ngModel",e.selectAccountStatus),i(),m("value","Active"),i(),c(s(8,8,"COMMON.Active")),i(2),m("value","All"),i(),c(s(11,10,"COMMON.All"))}}function Ce(o,C){if(o&1){let e=P();a(0,"mat-card-content",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"h5"),l(5),d(6,"translate"),n(),a(7,"p"),l(8),d(9,"translate"),n()(),a(10,"div",7)(11,"button",8),v("click",function(){g(e);let r=f();return u(r.openBeProviderDialog())}),p(12,"img",9),l(13),d(14,"translate"),n(),a(15,"button",8),v("click",function(){g(e);let r=f();return u(r.openBeFollowerDialog())}),p(16,"img",9),l(17),d(18,"translate"),n()()(),p(19,"provider-follower-header-cards"),a(20,"div",10)(21,"div",11),A(22,fe,7,6,"ng-container",12)(23,he,7,6,"ng-container",12)(24,ge,7,6,"div",12)(25,ue,15,12,"div",13),n(),p(26,"common-ag-grid",14),n()()()}if(o&2){let e=f();i(5),c(s(6,12,"HOME.HELLO")),i(3),c(s(9,14,"HOME.Homepage with overall statistics")),i(5),O(" ",s(14,16,"HOME.Be A Provider")," "),i(4),O(" ",s(18,18,"HOME.Be A Follower")," "),i(4),m("ngClass",W(20,pe,!e.role.hasProvider&&!e.role.hasFollower)),i(),m("ngIf",e.role.hasProvider),i(),m("ngIf",e.role.hasFollower),i(),m("ngIf",!e.role.hasProvider&&!e.role.hasFollower),i(),m("ngIf",!e.role.hasProvider&&!e.role.hasFollower),i(),m("gridConfig",e.gridConfig)("gridData",e.gridData)("showGridLoader",e.showGridLoader)}}function ve(o,C){o&1&&(a(0,"div",20),p(1,"img",21),n())}var $e=(()=>{class o{_webService;_router;showLoader=!1;showGridLoader=!1;providerMetric;followerMetric;providerDetails=[];followerDetails=[];tradingAccountDetails=[];role={};selectAccountStatus="Active";gridData=[];gridConfig;errorComponent;beProviderDialog=w(_);beFollowerDialog=w(_);commonDialog=w(_);constructor(e,t){this._webService=e,this._router=t,this.role.hasProvider=this._webService.isProviderAccount,this.role.hasFollower=this._webService.isSubscriptionAccount,this.getHomePageData(),this._webService.subscribeOnWebDataChange("HomeStandAloneComponent",r=>{this.recieveChildrenEmitter(r)})}recieveChildrenEmitter(e){e.action=="provider_created"?(this.refreshUserProfileAndRedirectToProviderOrFollowerProfile(e.data,!0),this.beProviderDialog.closeAll()):e.action=="follower_created"?(this.refreshUserProfileAndRedirectToProviderOrFollowerProfile(e.data,!1),this.beFollowerDialog.closeAll()):e.action=="open_account_details_popup"&&this.openBeTradingAccountPopup(e.data)}refreshUserProfileAndRedirectToProviderOrFollowerProfile(e,t){this._webService.setOrRefreshUserProfileData(r=>{r.status&&this._webService.emitOnWebDataChange({action:"refresh_sidenav_menu_options",callback:()=>{t?this._router.navigate([`/portal/providers/${e.id}`]):this._router.navigate([`/portal/subscriptions/${e.id}`])}})})}getHomePageData(){this.role.hasProvider?this.getProviderTableData():this.role.hasFollower?this.getFollowersTableData():this.getTradingAccountData("showPageLoader")}getProviderTableData(){this.showLoader=!0,this._webService.getProviderTableData().subscribe({next:e=>{this.providerDetails=[],e.items.forEach(t=>this.providerDetails.push(new re(t))),this.setUpAgGridOfHomePage(),this.showLoader=!1},error:e=>{this.showErrorWarnMessage(e?.error?.errorMessage)}})}getFollowersTableData(){this.showLoader=!0,this._webService.getFollowerTableData().subscribe({next:e=>{this.followerDetails=[],e.items.forEach(t=>this.followerDetails.push(new ae(t))),this.setUpAgGridOfHomePage(),this.showLoader=!1},error:e=>{this.showErrorWarnMessage(e?.error?.errorMessage)}})}getTradingAccountData(e){this.toggleLoadingOverlay(e,!0);let t={scope:this.selectAccountStatus,$count:!0};this._webService.getTradingAccountData(t).subscribe({next:r=>{this.tradingAccountDetails=[],r.items.forEach(h=>this.tradingAccountDetails.push(new oe(h))),this.gridData=this.tradingAccountDetails,this.toggleLoadingOverlay(e,!1)},error:r=>{this.showErrorWarnMessage(r?.error?.errorMessage)}})}toggleLoadingOverlay(e,t){e=="showPageLoader"?(this.setUpAgGridOfHomePage(),this.showLoader=t):e=="showGridLoader"&&(this.showGridLoader=t)}refreshTradeAccountList(){this.getTradingAccountData("showGridLoader")}showErrorWarnMessage(e){let t=this.errorComponent?.config;t.message=e||t.message,this.errorComponent?.openErrorSnackbar()}setUpAgGridOfHomePage(){this.role.hasProvider?(this.setupProviderGridConfig(),this.gridData=this.providerDetails):this.role.hasFollower?(this.setupFollowerGridConfig(),this.gridData=this.followerDetails):this.setupAccountGridConfig()}setupProviderGridConfig(){let e=[{field:"nickName",headerName:"HOME.Nickname",resizable:!1,width:250,suppressSizeToFit:!0,cellRenderer:x,colId:"providerProfileRedirection"},{field:"providerFees",headerName:"HOME.Fees",resizable:!1,width:140,maxWidth:140},{field:"followers",headerName:"HOME.Followers",resizable:!0,width:150,minWidth:150,maxWidth:250},{field:"followersGrowth",headerName:"HOME.Followers Growth",resizable:!0,width:170,minWidth:170,maxWidth:250},{field:"closedProfit",headerName:"HOME.Closed Profit",resizable:!0,width:150,minWidth:150,maxWidth:250},{field:"registerTime",headerName:"HOME.Registered",resizable:!1,width:250,maxWidth:250},{field:"actions",headerName:"",cellRenderer:b,flex:1,colId:"providerProfileRedirection",sortable:!1}];this.setupGridConfig(e)}setupFollowerGridConfig(){let e=[{field:"providerName",headerName:"HOME.Provider",resizable:!1,width:250,suppressSizeToFit:!0,cellRenderer:x,colId:"followerProfileRedirection"},{field:"tradingProfit",headerName:"HOME.Trading profit",resizable:!1,width:140,maxWidth:140},{field:"copiedPosition",headerName:"HOME.Copied Position",resizable:!0,minWidth:150,maxWidth:250},{field:"paidFees",headerName:"HOME.Paid Fees",resizable:!0,width:170,minWidth:170,maxWidth:250},{field:"registerTime",headerName:"HOME.Registered",resizable:!1,width:250,maxWidth:250},{field:"actions",headerName:"",cellRenderer:b,flex:1,colId:"followerProfileRedirection",sortable:!1}];this.setupGridConfig(e)}setupAccountGridConfig(){let e=[{field:"tradingAccName",headerName:"ACCOUNTS.Title",cellRenderer:x,resizable:!1,width:250,suppressSizeToFit:!0,colId:"accountDetailsPopup"},{field:"type",headerName:"ACCOUNTS.Type",cellRenderer:de,cellStyle:{display:"flex","justify-content":"center","flex-direction":"column"},resizable:!1,width:140,maxWidth:140},{field:"tradingAccountNo",headerName:"ACCOUNTS.Trading Account",resizable:!1,width:200,maxWidth:250},{field:"balance",headerName:"ACCOUNTS.Balance",resizable:!1,width:150,maxWidth:150},{field:"equity",headerName:"ACCOUNTS.Equity",resizable:!1,width:150,maxWidth:150},{field:"connectTime",headerName:"ACCOUNTS.Connected",resizable:!1,width:220,maxWidth:220},{field:"actions",headerName:"",cellRenderer:b,flex:1,colId:"accountDetailsPopup",showPopupArraow:!0,sortable:!1}];this.setupGridConfig(e)}setupGridConfig(e){this.gridConfig={maxHeight:"400px",noDataWarnMessage:"There are no metrics",gridOptions:{},agGridTheme:"ag-theme-alpine",pageSizeDropdownArr:[25,50,100],initialSelectedPageSize:25,columnDefination:e,enablePagination:!0,headerNameLangArr:e.map(t=>t.headerName),rowModelType:"clientSide",rowHeight:void 0}}openBeProviderDialog(){this.beProviderDialog.open(ne,{panelClass:"beProvider-dialog"}),this.beProviderDialog.afterAllClosed.subscribe(()=>{})}openBeFollowerDialog(){this.beFollowerDialog.open(le,{panelClass:"beFollower-dialog"}),this.beFollowerDialog.afterAllClosed.subscribe(()=>{})}openBeTradingAccountPopup(e){this.commonDialog.open(se,{panelClass:"common-dialog",data:this.prepareTradingAccountData(e)}),this.commonDialog.afterAllClosed.subscribe(()=>{})}prepareTradingAccountData(e){return{mainTitle:"HOME.TradingAccInfo",secondryTitle:"ACCOUNTS.InfoMetaTradeAccount",labelDetails:[{title:"COMMON.Id",value:e.clientId},{title:"COMMON.State",value:e.state,type:"tag"},{title:"ACCOUNTS.Connected",value:e.connectTime},{title:"PROVIDERS_PROFILE.MT login",value:e.tradingAccountNo},{title:"PROVIDERS_PROFILE.MT name",value:e.tradingAccName},{title:"ACCOUNTS.TradeGroupType",value:e.tradeGroupType,type:"tag"},{title:"ACCOUNTS.AvailInMetaTrade",value:e.avialableInMetaTrade,type:"tag"},{title:"ACCOUNTS.TradeType",value:e.tradeType,type:"tag"},{title:"PROVIDERS_PROFILE.Currency",value:e.currency},{title:"ACCOUNTS.Balance",value:e.balance},{title:"ACCOUNTS.Credit",value:e.credit},{title:"ACCOUNTS.Equity",value:e.equity},{title:"ACCOUNTS.FloatProfit",value:e.floatingPoint}]}}ngOnDestroy(){this._webService.unSubscribeOnWebDataChange("HomeStandAloneComponent")}static \u0275fac=function(t){return new(t||o)(S(V),S(z))};static \u0275cmp=E({type:o,selectors:[["app-home"]],viewQuery:function(t,r){if(t&1&&y(D,5),t&2){let h;N(h=I())&&(r.errorComponent=h.first)}},standalone:!0,features:[L],decls:4,vars:2,consts:[["appearance","outlined",1,"section-card"],["class","section-card-content",4,"ngIf"],["class","full-view-port-height d-flex justify-center align-center",4,"ngIf"],[1,"section-card-content"],[1,"home-card"],[1,"header","d-flex","justify-space-between","align-center"],[1,"header-title"],[1,"header-buttons","d-flex","justify-space-between","align-center","g-20"],[1,"primary-btn",3,"click"],["src","../../../../assets/icons/plusIcon.png"],[1,"metrics-table"],[1,"header-title",3,"ngClass"],[4,"ngIf"],["class","d-flex g-20 common-dropdown align-start",4,"ngIf"],[3,"gridConfig","gridData","showGridLoader"],[1,"d-flex","g-20","common-dropdown","align-start"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],[1,"refresh-btn",3,"click"],["src","../../../../assets/icons/rotateIcon.svg"],[1,"full-view-port-height","d-flex","justify-center","align-center"],["src","../../../../assets/logo/ICM Logo Default 1.png"]],template:function(t,r){t&1&&(a(0,"mat-card",0),A(1,Ce,27,22,"mat-card-content",1)(2,ve,2,0,"div",2),n(),p(3,"show-error-message")),t&2&&(i(),m("ngIf",!r.showLoader),i(),m("ngIf",r.showLoader))},dependencies:[G,U,B,me,D,J,$,Q,j,q,ie,ee,Z,te,k,Y,K,X,ce],styles:[".refresh-btn[_ngcontent-%COMP%]{background:#fff;color:#000;border-radius:8px;font-weight:500;font-size:18px;border:1px solid #D0D5DD;padding:12px 18px;display:flex;justify-content:space-between;gap:10px;align-items:center;cursor:pointer;min-height:56px;transition:background-color .3s linear,border-radius .3s linear,padding .3s linear,width .3s linear;margin-bottom:20px}  .common-dropdown .mdc-text-field{background-color:var(--primaryWhite)!important;border:1px solid var(--border-color)!important;border-bottom:0px!important;border-radius:8px!important;width:150px}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .common-dropdown .mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple:before{border-bottom-color:var(--border-color)!important}  .mat-mdc-form-field-subscript-wrapper{display:none}"]})}return o})();export{$e as HomeStandAloneComponent};
